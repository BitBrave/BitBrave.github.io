<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
<meta property="og:type" content="website">
<meta property="og:title" content="BitBrave">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="BitBrave">
<meta property="og:description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="XJ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>BitBrave</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">BitBrave</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">IIE</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/21/LeetCode(1353.%20Maximum%20Number%20of%20Events%20That%20Can%20Be%20Attended)%E5%91%A8%E8%B5%9B3%E9%A2%98%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/21/LeetCode(1353.%20Maximum%20Number%20of%20Events%20That%20Can%20Be%20Attended)%E5%91%A8%E8%B5%9B3%E9%A2%98%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1353. Maximum Number of Events That Can Be Attended)周赛3题题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-21 18:21:10 / 修改时间：19:41:57" itemprop="dateCreated datePublished" datetime="2020-02-21T18:21:10+08:00">2020-02-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1353-Maximum-Number-of-Events-That-Can-Be-Attended-周赛3题题解"><a href="#LeetCode-1353-Maximum-Number-of-Events-That-Can-Be-Attended-周赛3题题解" class="headerlink" title="LeetCode(\1353. Maximum Number of Events That Can Be Attended)周赛3题题解"></a>LeetCode(\1353. Maximum Number of Events That Can Be Attended)周赛3题题解</h1><p>Given an array of <code>events</code> where <code>events[i] = [startDayi, endDayi]</code>. Every event <code>i</code> starts at <code>startDayi</code> and ends at <code>endDayi</code>.</p>
<p>You can attend an event <code>i</code> at any day <code>d</code> where <code>startTimei &lt;= d &lt;= endTimei</code>. Notice that you can only attend one event at any time <code>d</code>.</p>
<p>Return <em>the maximum number of events</em> you can attend.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/02/05/e1.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,2],[2,3],[3,4]]</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: You can attend all the three events.</span><br><span class="line">One way to attend them all is as shown.</span><br><span class="line">Attend the first event on day 1.</span><br><span class="line">Attend the second event on day 2.</span><br><span class="line">Attend the third event on day 3.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events&#x3D; [[1,2],[2,3],[3,4],[1,2]]</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,4],[4,4],[2,2],[3,4],[1,1]]</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,100000]]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>

<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7]]</span><br><span class="line">Output: 7</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= events.length &lt;= 10^5</code></li>
<li><code>events[i].length == 2</code></li>
<li><code>1 &lt;= events[i][0] &lt;= events[i][1] &lt;= 10^5</code></li>
</ul>
<h2 id="解法一-Greedy"><a href="#解法一-Greedy" class="headerlink" title="解法一 Greedy"></a>解法一 Greedy</h2><p>Medium</p>
<p>给一个事件数组，每个事件有两个元素start和end，表示开始和结束时间，可能是很多天，也可能就一天。我们可以在一个事件的运行期间参与这个事件，但是我们在一天只能参与一个事件，而多个事件的运行时间可能重叠。返回可以参加的最大的事件数。</p>
<p>我们可以使用Greedy来做这个题，采用这样一个贪心策略：我们参加一个事件，尽可能早。将所有事件排序后，我们从头到尾遍历事件，对每一个事件，都尽可能早地去参加，这样就能给后面的尽可能留多的时间。这是可以证明任何最优方案可以转化为按照这个策略所得到的结果。</p>
<p>具体算法如下。</p>
<p>将事件按照结束时间排序。使用一个集合S记录选中的事件，初始化事件为空。</p>
<p>然后从头到尾遍历事件，遍历到一个事件e，如果e的开始时间不在集合里面，就将这个开始时间放入集合。</p>
<p>如果在里面的话，就从左到右遍历这个事件的天数，只要发现不在集合内的，就加入集合。</p>
<p>然后结束遍历。返回集合的大小即可。</p>
<h3 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，N个事件，排序花费O(nlogn)，遍历的时间复杂度就是N个事件的天数之和。空间上，set最多存储N个值，为O(n)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">bool cmp(vector&lt;int&gt; a, vector&lt;int&gt; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a[<span class="number">1</span>] &lt; b[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int maxEvents(vector&lt;vector&lt;int&gt;&gt;&amp; events) &#123;</span><br><span class="line">        set&lt;int&gt; S;</span><br><span class="line">        sort(events.begin(), events.end(), cmp);</span><br><span class="line">        <span class="keyword">for</span> (vector&lt;int&gt; event : events) &#123;</span><br><span class="line">            <span class="keyword">if</span> (S.find(event[<span class="number">0</span>]) == S.end()) S.insert(event[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (int i=event[<span class="number">0</span>]+<span class="number">1</span>; i&lt;=event[<span class="number">1</span>]; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (S.find(i) == S.end()) &#123;</span><br><span class="line">                        S.insert(i);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> S.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="解法二-优先队列"><a href="#解法二-优先队列" class="headerlink" title="解法二 优先队列"></a>解法二 优先队列</h2><p>还有一种使用优先队列的的方式。</p>
<p>因为最多有100000天可以参加活动，我们从第一天开始往后看，每一天都加入当前开始的事件到队列里面去。然后从队列里面删除掉在当天已经结束的所有事件。这样，队列里面就都是可以参加的活动。然后在这些事件里，我们参加最早结束的事件，从队列删除队列首部就可以了。即采用了贪婪策略，每天参加可以参加的事件中最早结束的。</p>
<p>算法如下</p>
<p>构造一个优先队列pQ来存储事件的结束时间，使用小顶堆实现，表明每次出队列的是结束早的事件。</p>
<p>对事件数组按照开始时间排序。然后根据题意，事件的运行时间最多为10000天。从第一天开始遍历（主循环）。同时从事件数组头也开始遍历，记录位置。</p>
<p>当优先队列pQ不为空并且队首的元素比当前天数小时，即当前天数超过了事件的结束时间，不在对应事件的活动时间内。从队列内弹出队首元素。</p>
<p>从事件数组记录的位置开始向后遍历，如果当前事件的开始时间等于当前天数，就将当前事件的结束时间压入优先队列pQ。只要遇到当前事件的开始时间不等于当前天数。</p>
<p>查看pQ是否有元素，如果有元素，则表明当前天数下，可以参加事件，res+1。然后重复上述步骤，遍历下一天，最后返回结果res。</p>
<h3 id="时空复杂度-1"><a href="#时空复杂度-1" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，排序和队列的操作均为$O(nlogn)$，空间上为$O(n)$。</p>
<p><code>Runtime: **328 ms**</code></p>
<p><code>Memory Usage: **45.6 MB**</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxEvents</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; events)</span> </span>&#123;</span><br><span class="line">        priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; pQ; <span class="comment">// 小顶堆的优先队列</span></span><br><span class="line">        sort(events.<span class="built_in">begin</span>(), events.<span class="built_in">end</span>()); <span class="comment">// 默认使用第二维数组中第一个元素升序排列，这里就是按事件的开始时间升序</span></span><br><span class="line">        <span class="keyword">int</span> e = <span class="number">0</span>, len = events.<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d=<span class="number">1</span>; d&lt;=<span class="number">100000</span>; d++) &#123;</span><br><span class="line">            <span class="comment">// 丢掉过期的事件</span></span><br><span class="line">            <span class="keyword">while</span> (pQ.empty()==<span class="literal">false</span> <span class="keyword">and</span> pQ.top() &lt; d) pQ.pop();</span><br><span class="line">            <span class="comment">// 存入今天刚开始的事件的结束时间</span></span><br><span class="line">            <span class="keyword">while</span> (e &lt; len <span class="keyword">and</span> events[e][<span class="number">0</span>] == d) pQ.push(events[e++][<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// 从队列里找出最早结束的事件参加</span></span><br><span class="line">            <span class="keyword">if</span> (pQ.empty() == <span class="literal">false</span>) &#123;</span><br><span class="line">                pQ.pop();</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>优化一下，跳过那些一个事件都不存在的天数。</p>
<p><code>Runtime: **272 ms**</code></p>
<p><code>Memory Usage: **45.6 MB**</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxEvents</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; events)</span> </span>&#123;</span><br><span class="line">        priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; pQ; <span class="comment">// 小顶堆的优先队列</span></span><br><span class="line">        sort(events.<span class="built_in">begin</span>(), events.<span class="built_in">end</span>()); <span class="comment">// 默认使用第二维数组中第一个元素升序排列，这里就是按事件的开始时间升序</span></span><br><span class="line">        <span class="keyword">int</span> d = <span class="number">0</span>, e = <span class="number">0</span>, len = events.<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//cout&lt;&lt;"star"&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">while</span> (pQ.empty()==<span class="literal">false</span> <span class="keyword">or</span> e&lt;len) &#123;</span><br><span class="line">            <span class="comment">// 当前天数不存在任何事件时，更新到当前事件的开始时间</span></span><br><span class="line">            <span class="keyword">if</span> (pQ.empty()) d = events[e][<span class="number">0</span>];</span><br><span class="line">            <span class="comment">// 存入今天刚开始的事件的结束时间</span></span><br><span class="line">            <span class="keyword">while</span> (e &lt; len <span class="keyword">and</span> events[e][<span class="number">0</span>] &lt;= d) pQ.push(events[e++][<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// 从队列里找出最早结束的事件参加</span></span><br><span class="line">            pQ.pop();</span><br><span class="line">            res++;</span><br><span class="line">            d++;</span><br><span class="line">            <span class="comment">// 丢掉过期的事件</span></span><br><span class="line">            <span class="keyword">while</span> (pQ.empty()==<span class="literal">false</span> <span class="keyword">and</span> pQ.top() &lt; d) pQ.pop();  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-21. 这题没想出来，是参考的别人的做法学的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/21/LeetCode(1354.%20Construct%20Target%20Array%20With%20Multiple%20Sums)%E5%91%A8%E8%B5%9B4%E9%A2%98%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/21/LeetCode(1354.%20Construct%20Target%20Array%20With%20Multiple%20Sums)%E5%91%A8%E8%B5%9B4%E9%A2%98%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1354. Construct Target Array With Multiple Sums)周赛4题题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-21 17:10:54 / 修改时间：18:13:28" itemprop="dateCreated datePublished" datetime="2020-02-21T17:10:54+08:00">2020-02-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1354-Construct-Target-Array-With-Multiple-Sums-周赛4题题解"><a href="#LeetCode-1354-Construct-Target-Array-With-Multiple-Sums-周赛4题题解" class="headerlink" title="LeetCode(\1354. Construct Target Array With Multiple Sums)周赛4题题解"></a>LeetCode(\1354. Construct Target Array With Multiple Sums)周赛4题题解</h1><p>Given an array of integers <code>target</code>. From a starting array, <code>A</code> consisting of all 1’s, you may perform the following procedure :</p>
<ul>
<li>let <code>x</code> be the sum of all elements currently in your array.</li>
<li>choose index <code>i</code>, such that <code>0 &lt;= i &lt; target.size</code> and set the value of <code>A</code> at index <code>i</code> to <code>x</code>.</li>
<li>You may repeat this procedure as many times as needed.</li>
</ul>
<p>Return True if it is possible to construct the <code>target</code> array from <code>A</code> otherwise return False.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: target &#x3D; [9,3,5]</span><br><span class="line">Output: true</span><br><span class="line">Explanation: Start with [1, 1, 1] </span><br><span class="line">[1, 1, 1], sum &#x3D; 3 choose index 1</span><br><span class="line">[1, 3, 1], sum &#x3D; 5 choose index 2</span><br><span class="line">[1, 3, 5], sum &#x3D; 9 choose index 0</span><br><span class="line">[9, 3, 5] Done</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: target &#x3D; [1,1,1,2]</span><br><span class="line">Output: false</span><br><span class="line">Explanation: Impossible to create target array from [1,1,1,1].</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: target &#x3D; [8,5]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>N == target.length</code></li>
<li><code>1 &lt;= target.length &lt;= 5 * 10^4</code></li>
<li><code>1 &lt;= target[i] &lt;= 10^9</code></li>
</ul>
<p><a href="https://leetcode.com/problems/construct-target-array-with-multiple-sums/discuss" target="_blank" rel="noopener">Discuss</a></p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给出一个全部整数数组A，然后判断其是否可以由全部为1的等长数组变换而来。变换方式为：1、计算数组（初始化全部为1）的和，2、用和替换掉数组内的一个元素。重复12步骤可以若干次。如果最后能变成A数组，就返回True，否则为False。</p>
<p>这个题可以使用最大堆解决。其实理论上来说回溯法也可以，但是数组A中的有很大的数，会导致回溯深度超过内存限制。因此这里使用最大堆。当然也可以使用优先队列，构建值大的优先级高的队列。</p>
<p>我们将整数的元素构建最大堆，然后可以知道的是，这个数组中的最大元素一定是由剩下的元素加上最大值位置上原来的数字组成的。我们可以把当前的数组看成一个状态，那么上一个状态的数组如何构建呢？这里我们只需要最大值位置上的上一个状态的元素计算出来填进去就可以了。那么这个怎么计算呢？</p>
<p>假设当前状态下，数组的和为S，数组中最大值为M。那么上一个状态的数组的和就为M，所以上一个状态被替换掉的数为M-(S-M)=2M-S。分析题可以知道，数组元素的顺序其实是没有什么关系的，因此我们将最大堆的顶部最大元素去掉，然后插入2M-S，然后更新堆。如何判断是否合法呢，只要最后可以保证最大堆中顶部元素为1，这就保证所有的元素都小于等于1，并且2M-S进入堆时不会为负数或0，同时不能为M，即可以保证所有元素都大于等于1并且不会状态重复，即最后保证所有元素都为1。满足条件就返回True，否则就为False。</p>
<p>PS：这里直接使用2M-S会LTE，怎么优化呢，可以观察，每次都是最大的元素作为上一个状态的数组和，而如果最大元素和其余元素之和相差很大，那么一步一步加减会很慢，这里我们可以使用mod操作，使用求余数，就跟计算最大公约数一样。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间复杂度(OlogS)，S为A数组的和。空间上，堆O(n)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPossible</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>, len = target.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t : target) sum += t;</span><br><span class="line">        <span class="comment">// 建立大顶堆</span></span><br><span class="line">        make_heap(target.<span class="built_in">begin</span>(), target.<span class="built_in">end</span>(), less&lt;<span class="keyword">int</span>&gt;());</span><br><span class="line">        <span class="comment">// 遍历堆元素</span></span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="keyword">while</span> (target[<span class="number">0</span>] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            pop_heap(target.<span class="built_in">begin</span>(), target.<span class="built_in">end</span>(), less&lt;<span class="keyword">int</span>&gt;()); <span class="comment">// 弹出堆顶元素</span></span><br><span class="line">            <span class="keyword">if</span> (sum - target[len<span class="number">-1</span>] &lt;= <span class="number">1</span>) <span class="keyword">return</span> sum - target[len<span class="number">-1</span>]  == <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (target[len<span class="number">-1</span>] &lt;= (sum - target[len<span class="number">-1</span>])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            tmp = target[len<span class="number">-1</span>] % (sum - target[len<span class="number">-1</span>]);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (tmp == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">            sum = sum - target[len<span class="number">-1</span>] + tmp;</span><br><span class="line">            target[len<span class="number">-1</span>] = tmp;</span><br><span class="line">            make_heap(target.<span class="built_in">begin</span>(), target.<span class="built_in">end</span>(), less&lt;<span class="keyword">int</span>&gt;()); <span class="comment">// 重整堆</span></span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-21</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/LeetCode(1326.%20Minimum%20Number%20of%20Taps%20to%20Open%20to%20Water%20a%20Garden)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/LeetCode(1326.%20Minimum%20Number%20of%20Taps%20to%20Open%20to%20Water%20a%20Garden)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1326. Minimum Number of Taps to Open to Water a Garden)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-18 18:10:09 / 修改时间：21:10:03" itemprop="dateCreated datePublished" datetime="2020-02-18T18:10:09+08:00">2020-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="LeetCode-1326-Minimum-Number-of-Taps-to-Open-to-Water-a-Garden-题解"><a href="#LeetCode-1326-Minimum-Number-of-Taps-to-Open-to-Water-a-Garden-题解" class="headerlink" title="LeetCode(\1326. Minimum Number of Taps to Open to Water a Garden)题解"></a>LeetCode(\1326. Minimum Number of Taps to Open to Water a Garden)题解</h2><p>There is a one-dimensional garden on the x-axis. The garden starts at the point <code>0</code> and ends at the point <code>n</code>. (i.e The length of the garden is <code>n</code>).</p>
<p>There are <code>n + 1</code> taps located at points <code>[0, 1, ..., n]</code> in the garden.</p>
<p>Given an integer <code>n</code> and an integer array <code>ranges</code> of length <code>n + 1</code> where <code>ranges[i]</code> (0-indexed) means the <code>i-th</code> tap can water the area <code>[i - ranges[i], i + ranges[i]]</code> if it was open.</p>
<p>Return <em>the minimum number of taps</em> that should be open to water the whole garden, If the garden cannot be watered return <strong>-1</strong>.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/01/16/1685_example_1.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 5, ranges &#x3D; [3,4,1,1,0,0]</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: The tap at point 0 can cover the interval [-3,3]</span><br><span class="line">The tap at point 1 can cover the interval [-3,5]</span><br><span class="line">The tap at point 2 can cover the interval [1,3]</span><br><span class="line">The tap at point 3 can cover the interval [2,4]</span><br><span class="line">The tap at point 4 can cover the interval [4,4]</span><br><span class="line">The tap at point 5 can cover the interval [5,5]</span><br><span class="line">Opening Only the second tap will water the whole garden [0,5]</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 3, ranges &#x3D; [0,0,0,0]</span><br><span class="line">Output: -1</span><br><span class="line">Explanation: Even if you activate all the four taps you cannot water the whole garden.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 7, ranges &#x3D; [1,2,1,0,2,1,0,1]</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 8, ranges &#x3D; [4,0,0,0,0,0,0,0,4]</span><br><span class="line">Output: 2</span><br></pre></td></tr></table></figure>

<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 8, ranges &#x3D; [4,0,0,0,4,0,0,0,4]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= n &lt;= 10^4</code></li>
<li><code>ranges.length == n + 1</code></li>
<li><code>0 &lt;= ranges[i] &lt;= 100</code></li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>在一维数组上有一个花园，有n+1个水龙头，分别位于0，1，2，···，n。给定一个n+1的数组ranges，第i个水龙头的位置为i，喷水的面积为(i-ranges[i], i+ranges[i]). 现在问最少需要打开多少水龙头，可以覆盖整个花园？返回最少需要的水龙头数，如果不能覆盖就返回-1。</p>
<p>这个题使用Greedy的办法，也许有DP的更普适性的解决办法，但是我没想到。</p>
<p>Greedy思路如下，我们每次选都尽可能选覆盖范围广的。首先根据ranges将每个水龙头的喷水区间算出来。然后根据其右边界进行降序排序。记住喷水区间右边最大为花园的边界，即所有右边界为min(n, right-val)，同理，左边界最小为花园的左边界，max(0, left-val)。</p>
<p>然后我们遍历每个水龙头的边界，初始化左右边界为最右边水龙头的边界，res=1，然后从第二个水龙头开始。每次选择一个向左延伸最远同时又和当前区间有交集的水龙头，选定了之后res++，这里要注意特殊情况，假如所有右边界都一样，然后直接就到达花园左边界（比如所有水龙头的右边界都是花园右边界，其中若干个水龙头的左边界是花园左边界，那么其实只需要1个即可，res=1），那么我们选定的区间是可以全部覆盖上一个，这时候不执行res++。因此我们设定tl和tr暂时定义左右区间。然后判断是否更新。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，整理边界 $O(n)$ ，排序$O(nlogn)$，遍历$O(n)$，整体$O(nlogn)$。空间上，存储边界$O(n)$。</p>
<p><code>Runtime: 396 ms, faster than 6.88% of C++ online submissions for Minimum Number of Taps to Open to Water a Garden.</code></p>
<p><code>Memory Usage: 99.4 MB, less than 100.00% of C++ online submissions for Minimum Number of Taps to Open to Water a Garden.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a[<span class="number">1</span>] &gt; b[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minTaps</span><span class="params">(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; ranges)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">V</span><span class="params">(n+<span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">2</span>))</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            V[i][<span class="number">0</span>] = <span class="built_in">max</span>(<span class="number">0</span>, i - ranges[i]);</span><br><span class="line">            V[i][<span class="number">1</span>] = <span class="built_in">min</span>(n, i + ranges[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        sort(V.<span class="built_in">begin</span>(), V.<span class="built_in">end</span>(), cmp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">1</span>, l = V[<span class="number">0</span>][<span class="number">0</span>], r = V[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        </span><br><span class="line">            <span class="comment">// 找到左边界离0最近的一个坐标，更新l和r</span></span><br><span class="line">            <span class="keyword">int</span> k, tl = INT_MAX, tr;</span><br><span class="line">            <span class="keyword">for</span> (k=i; k&lt;=n; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (V[k][<span class="number">1</span>] &lt; l) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tl == INT_MAX) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (V[k][<span class="number">1</span>] == r <span class="keyword">and</span> V[k][<span class="number">0</span>] &lt;= l) l = V[k][<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (V[k][<span class="number">0</span>] &lt; l <span class="keyword">and</span> V[k][<span class="number">0</span>] &lt; tl) &#123;</span><br><span class="line">                    tl = V[k][<span class="number">0</span>];</span><br><span class="line">                    tr = V[k][<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            i = k - <span class="number">1</span>;</span><br><span class="line">            l = tl;</span><br><span class="line">            r = tr;</span><br><span class="line">            <span class="keyword">if</span> (tl != INT_MAX) res++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave， 2020-02-18。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/Mac%E4%B8%8B%E5%A4%A9%E6%B1%A0%E6%96%B0%E4%BA%BA%E8%B5%9B%E9%80%9A%E8%BF%87%E5%85%A8%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/Mac%E4%B8%8B%E5%A4%A9%E6%B1%A0%E6%96%B0%E4%BA%BA%E8%B5%9B%E9%80%9A%E8%BF%87%E5%85%A8%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Mac下天池新人赛通过全流程详解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-18 14:05:19 / 修改时间：14:05:22" itemprop="dateCreated datePublished" datetime="2020-02-18T14:05:19+08:00">2020-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mac下天池新人赛通过全流程详解"><a href="#Mac下天池新人赛通过全流程详解" class="headerlink" title="Mac下天池新人赛通过全流程详解"></a>Mac下天池新人赛通过全流程详解</h1><h2 id="一、安装docker环境"><a href="#一、安装docker环境" class="headerlink" title="一、安装docker环境"></a>一、安装docker环境</h2><p>在mac下安装docker，直接下载软件安装即可。</p>
<p>链接：<a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener">https://docs.docker.com/docker-for-mac/install/</a></p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBebf4e52305359827d736ad6e5c215f20?method=getImage&version=32&cstk=7hthgWHw" alt="image-20200218090852375"></p>
<h2 id="二、开通阿里云镜像服务"><a href="#二、开通阿里云镜像服务" class="headerlink" title="二、开通阿里云镜像服务"></a>二、开通阿里云镜像服务</h2><p>这里按照“手把手教程”（在新人赛的链接内）内的流程一步步操作即可，非常的详细和简单。</p>
<p>链接如下：<a href="https://tianchi.aliyun.com/competition/entrance/231759/tab/174" target="_blank" rel="noopener">https://tianchi.aliyun.com/competition/entrance/231759/tab/174</a></p>
<h2 id="三、构建镜像"><a href="#三、构建镜像" class="headerlink" title="三、构建镜像"></a>三、构建镜像</h2><p>这里就是构建自己的镜像，其实docker的各部分关系如图所示。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBd869d338687854f93ada5ae25612415e?method=getImage&version=24&cstk=7hthgWHw" alt="image-20200218091244075"></p>
<h3 id="建立文件"><a href="#建立文件" class="headerlink" title="建立文件"></a>建立文件</h3><p>这里我们选择使用Dockerfile的方式构建镜像，步骤如下：</p>
<ol>
<li><p>建立一个文件夹如tianchi-test，用来存储本次项目的所有文件。</p>
</li>
<li><p>在文件夹内建立四个文件，Dockerfile、hello_world.py、result.json、run.sh</p>
</li>
</ol>
<p>至此，文件就建立完成了，这个项目基本完成了一半，剩下的就是填充各个文件。</p>
<p><strong>Dockerfile</strong> 用来指定如何构建一个镜像，在其中填入如下内容。</p>
<pre><code># Base Images
## 从天池基础镜像构建
FROM registry.cn-shanghai.aliyuncs.com/tcc-public/python:3
## 把当前文件夹里的文件构建到镜像的根目录下
ADD . /
## 指定默认工作目录为根目录（需要把run.sh和生成的结果文件都放在该文件夹下，提交后才能运行
WORKDIR /
## 镜像启动后统一执行 sh run.sh
CMD [&quot;sh&quot;, &quot;run.sh&quot;]</code></pre><p><strong>hello_world.py</strong> 项目的主体文件，完成三个题目的代码在这里面构建。</p>
<pre><code>import sys
import json
res = {}

res[&apos;Q1&apos;] = &quot;Hello world&quot;
#print(&quot;Q1-pycharm&quot;, res[&apos;Q1&apos;])
tmp = 0

with open(&quot;./tcdata/num_list.csv&quot; , &apos;r&apos;) as f:
   data = f.readlines()

num_list = [int(x.strip()) for x in data]
res_sum = sum(num_list)

#print(&quot;Q2-pycharm&quot;, res_sum)

res[&apos;Q2&apos;] = res_sum # np.sum(res_sum)
res[&apos;Q3&apos;] = sorted(num_list,reverse=True)[:10]
with open(&apos;result.json&apos;, &apos;w&apos;, encoding=&apos;utf-8&apos;) as f:
   f.write(json.dumps(res, ensure_ascii=False))

#print(&quot;Q3-pycharm&quot;, res[&apos;Q3&apos;])</code></pre><p><strong>result.json</strong> 用来存储结果，不用填充内容</p>
<p><strong>run.sh</strong> 就一句话，用来编译hello_world.py</p>
<pre><code>python hello_world.py</code></pre><p>这里大家注意到了，我们并没有num_list.csv。“/tcdata/num_list.csv”这个系统会自动创建，我们可以不做操作，只是读取的时候设置一下就行，只需要在hello_world.py代码里写明读取就可以了。</p>
<p>同时，我们的项目主体文件hello_world.py也不一定要叫这个名字，只要和run.sh内的保持一致就可以了。</p>
<h3 id="build镜像"><a href="#build镜像" class="headerlink" title="build镜像"></a>build镜像</h3><p>首先从远端下载一个基础镜像，这个基础镜像在上述的Dockerfile中有使用到。</p>
<pre><code>docker pull registry.cn-shanghai.aliyuncs.com/tcc-public/python:3</code></pre><p>然后在tianchi-test目录下使用如下命令构建自己的镜像。</p>
<pre><code>docker build -t registry.cn-shanghai.aliyuncs.com/账户名/仓库名:版本号 .</code></pre><p>注意最后有个逗号.<br><img src="https://note.youdao.com/yws/api/personal/file/WEBa4d8498b6252bc6a7b2f9860c1960237?method=getImage&version=19&cstk=7hthgWHw" alt="image-20200218100328898"></p>
<h2 id="四、推送镜像到阿里云ACR"><a href="#四、推送镜像到阿里云ACR" class="headerlink" title="四、推送镜像到阿里云ACR"></a>四、推送镜像到阿里云ACR</h2><p>推送镜像有两种方式。</p>
<ol>
<li><p><strong>服务器命令行提交</strong>（在自己建立的仓库的基本信息目录内有相关提交代码，直接复制即可）</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB28d4d9e0df4ceb51aff3b9b87f43505d?method=getImage&version=18&cstk=7hthgWHw" alt="image-20200218095053531"></p>
</li>
<li><p><strong>使用Pycharm+ <a href="https://cn.aliyun.com/product/cloudtoolkit" target="_blank" rel="noopener">Alibaba Cloud Toolkit</a>提交。</strong></p>
<ul>
<li><p>a、配置账户信息，获取AccessKey：<a href="https://help.aliyun.com/document_detail/145787.html?spm=a2c4g.11186623.2.22.702c1d4eQUpZ4M#task-2349932" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/145787.html?spm=a2c4g.11186623.2.22.702c1d4eQUpZ4M#task-2349932</a>. 得到AccessKey ID 和 AccessKey Secret。</p>
</li>
<li><p>b、pycharm安装Alibaba Cloud Toolkit</p>
<p>“command + ,”打开设置界面。或者：</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB586228ee61dbd7bd2eb1e28dc748b10e?method=getImage&version=27&cstk=7hthgWHw" alt="image-20200218112749131"></p>
<p>然后搜索插件。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBcb872189bab1efa1c0197f5853c8291b?method=getImage&version=11&cstk=7hthgWHw" alt="image-20200218113114083"></p>
<p>安装完成之后界面如下。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB787563c68ed97cb06b834715f9a3b732?method=getImage&version=17&cstk=7hthgWHw" alt="image-20200218113212619"></p>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>c、在pycharm中设置用于打包本地镜像的 Docker 环境。<br>进入设置界面，打开之后，Mac勾选 <strong>Unix Socket</strong>，然后单击 <strong>Browse</strong>，输入<code>unix:///var/run/docker.sock</code>。。<strong>注意：如果出现连接测试报错，可进入 Docker 的 Settings 界面，单击左侧导航栏中的 General，然后选择 Expose daemon on tcp://localhost:2375 without TLS。</strong><br><img src="https://note.youdao.com/yws/api/personal/file/WEB495006b6b8e589b38122b921c6b9cb3b?method=getImage&version=25&cstk=7hthgWHw" alt="image-20200218113507511"><br>在下图中填入第一遍得到的ID和密码。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBbd1d80a7e1a1467e6f3df42af15652a2?method=getImage&version=20&cstk=7hthgWHw" alt="image-20200218112851387"></p>
<ul>
<li>d、推送仓库到ACR<br>在pycharm上，打开项目文件tianchi-test。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5ade6e0b87a50ab47007c00044fcff8a?method=getImage&version=16&cstk=7hthgWHw" alt="image-20200218114230636"><br>右键单击应用工程，如下操作。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9634749a8726af0be5231797a6b7cc4e?method=getImage&version=31&cstk=7hthgWHw" alt="image-20200218114415051"><br>得到如下界面，然后填入项目目录等，点击Run开始推送。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5ce6fc3f4cf613c545b98ca06651b049?method=getImage&version=10&cstk=7hthgWHw" alt="image-20200218115103857"><br>运行成功如下图所示，此时远端就显示你成功推送了。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBad1c5fc0cc0c6570cad1b9bf6af6f3bf?method=getImage&version=28&cstk=7hthgWHw" alt="image-20200218115926611"><br><img src="https://note.youdao.com/yws/api/personal/file/WEB0cf5a6ea065ea36d65a1fc73773cb598?method=getImage&version=14&cstk=7hthgWHw" alt="image-20200218120059574"></li>
</ul>
</li>
</ul>
<h2 id="五、验证实验结果"><a href="#五、验证实验结果" class="headerlink" title="五、验证实验结果"></a>五、验证实验结果</h2><p>推送完成之后，就在比赛页面输入仓库链接和账户信息即可提交结果了。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB269bb755c32d8fbaab2bbb1b7d79e350?method=getImage&version=29&cstk=7hthgWHw" alt="image-20200218120358998"></p>
<p>提交之后，在成绩页面即可查看。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB47ffdb203ec46a95e45db6755cff9f51?method=getImage&version=23&cstk=7hthgWHw" alt="image-20200218120435389"></p>
<h2 id="六、本地调试"><a href="#六、本地调试" class="headerlink" title="六、本地调试"></a>六、本地调试</h2><p>一般来说，代码写完之后，需要进行调试，一种方法是我们先构建项目主体代码hello_world.py，然后自己建立一个csv文件进行调试，最后一切都OK了再建立镜像。但是我们也可以建立镜像之后，运行起来进入容器调试，这里我们如何进入镜像调试呢？</p>
<p>直接在容器内运行项目，XX为镜像的ID，通过docker images可以查看，这里不需要把ID全部写出来，只需要前几个字母，只要可以将其余其它ID区分开就可以了。</p>
<pre><code>docker run -it XX</code></pre><p><img src="https://note.youdao.com/yws/api/personal/file/WEBbacebd5dc491bd3d6c78762b4d1eef19?method=getImage&version=21&cstk=7hthgWHw" alt="image-20200218121516536"></p>
<p>或者按照如下激活镜像，进入容器。</p>
<pre><code>docker run -it XXX /bin/bash 
#XXX为镜像名称，同样只需要前几个字母数字，只要能区分开来即可，进入终端。</code></pre><p><img src="https://note.youdao.com/yws/api/personal/file/WEB81a59b9266604d305ba15e59191d7eb9?method=getImage&version=22&cstk=7hthgWHw" alt="image-20200218121740938"></p>
<p>或者镜像已经运行成容器了，可以在命令行输入如下代码，进入容器。</p>
<pre><code>docker exec –it XXXXXXXXXX bash 
# 进入正在运行的容器内，XXXXXXXXXX是镜像ID 
# 进入容器后，就可以修改镜像了，进去之后就是正常的操作，比如pip3之类的</code></pre><p>然后修改完成之后</p>
<pre><code>$ docker commit XXX [镜像ID] [保存成的镜像名字]:1.0 [版本] 
# 提交你刚才修改的镜像，新的镜像名称为wujiekd，版本为1.0</code></pre><p>在里面调试完之后输入exit即可退出。</p>
<p>BitBrave，2020-02-18.</p>
<p>​      </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E3%80%81%E4%B8%AD%E5%BA%8F%E3%80%81%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E7%9A%84%E9%9D%9E%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E3%80%81%E4%B8%AD%E5%BA%8F%E3%80%81%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E7%9A%84%E9%9D%9E%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">二叉树的前序、中序、后序遍历的非递归实现</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-18 00:01:47 / 修改时间：00:39:17" itemprop="dateCreated datePublished" datetime="2020-02-18T00:01:47+08:00">2020-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="二叉树的前序、中序、后序遍历的非递归实现"><a href="#二叉树的前序、中序、后序遍历的非递归实现" class="headerlink" title="二叉树的前序、中序、后序遍历的非递归实现"></a>二叉树的前序、中序、后序遍历的非递归实现</h1><h2 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h2><h3 id="递归算法"><a href="#递归算法" class="headerlink" title="递归算法"></a>递归算法</h3><p>二叉树的前序遍历的递归算法很简单。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pre_order</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (root 是空节点) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">// 打印当前节点</span></span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;root-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  <span class="comment">// 遍历左子树</span></span><br><span class="line">  pre_order(root-&gt;left);</span><br><span class="line">  <span class="comment">// 遍历右子树</span></span><br><span class="line">  pre_order(root-&gt;right);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="非递归算法"><a href="#非递归算法" class="headerlink" title="非递归算法"></a>非递归算法</h3><p> 实现其非递归算法就需要使用到栈Stack。用”栈”来取代递归,出栈的操作其实就相当于某层递归的出口。我们从根节点开始，不断向左子节点方向移动，并打印遇到的每一个节点，然后将其进栈。最后遇到空指针则说明我们走到了最左边的节点，这时候开始出栈，并将指针指向出栈节点的右子节点，然后继续进行上述判断。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pre_order</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 建立栈Stack</span></span><br><span class="line">  <span class="built_in">stack</span> S;</span><br><span class="line">  <span class="keyword">while</span> (root不是空指针 <span class="keyword">or</span> S非空) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root不是空指针) &#123;</span><br><span class="line">      <span class="comment">// 打印节点值</span></span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;root-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">      <span class="comment">// 入栈，进入左子树</span></span><br><span class="line">      S.push(root);</span><br><span class="line">      <span class="comment">// 将指针向左子树方向移动</span></span><br><span class="line">      root = root-&gt;left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// root为空指针，这里说明左子树访问完毕</span></span><br><span class="line">      <span class="comment">// 出栈</span></span><br><span class="line">      root = S.top(); S.pop();</span><br><span class="line">      <span class="comment">// 将指针向右子树方向移动</span></span><br><span class="line">      root = root-&gt;right;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><p>中序遍历的递归算法如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">middle_order</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (root 是空节点) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">// 遍历左子树</span></span><br><span class="line">  middle_order(root-&gt;left);</span><br><span class="line">  <span class="comment">// 打印当前节点</span></span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;root-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  <span class="comment">// 遍历右子树</span></span><br><span class="line">  middle_order(root-&gt;right);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>非递归算法同样用到了栈，这里与前序不同的只是打印节点的时机不同而已，前序是入栈之前打印，中序则是左子树遍历完成再打印，然后再遍历右子树，因此打印的时机在于出栈之后遍历右子树时。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">middle_order</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 建立栈Stack</span></span><br><span class="line">  <span class="built_in">stack</span> S;</span><br><span class="line">  <span class="keyword">while</span> (root不是空指针 <span class="keyword">or</span> S非空) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root不是空指针) &#123;</span><br><span class="line">      <span class="comment">// 入栈</span></span><br><span class="line">      S.push(root);</span><br><span class="line">      <span class="comment">// 将指针向左子树方向移动</span></span><br><span class="line">      root = root-&gt;left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// root为空指针</span></span><br><span class="line">      <span class="comment">// 出栈，左子树访问完毕，回到当前节点</span></span><br><span class="line">      root = S.top(); S.pop();</span><br><span class="line">      <span class="comment">// 打印节点值</span></span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;root-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">      <span class="comment">// 将指针向右子树方向移动</span></span><br><span class="line">      root = root-&gt;right;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h2><p>后序遍历的递归算法如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">later_order</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (root 是空节点) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">// 遍历左子树</span></span><br><span class="line">  later_order(root-&gt;left);</span><br><span class="line">  <span class="comment">// 遍历右子树</span></span><br><span class="line">  later_order(root-&gt;right);</span><br><span class="line">  <span class="comment">// 打印当前节点</span></span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;root-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后序遍历的非递归实现和前序中序类似，也是使用栈实现。但是需要注意的是，正常情况下后序遍历是从当前节点开始遍历左子树，然后回到当前节点，然后遍历右子树，然后再回到当前节点，输出当前节点的值。而在前序和中序遍历的非递归实现时，当前节点入栈，然后遍历左子树，左子树遍历完成后回到当前节点，再进入右子树时，当前节点是从栈中删除了的，右子树遍历完成回来是找不到当前节点的。</p>
<p>因此后续遍历中，当前节点需要入栈两次，这样才能右子树遍历完成之后回来可以找到当前节点。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">later_order</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 建立Stack</span></span><br><span class="line">  <span class="built_in">stack</span> S;</span><br><span class="line">  <span class="comment">// 设定一个指针，记录当前节点的右子树是否已经访问过了，如果访问过了就打印当前节点，否则就遍历右子树</span></span><br><span class="line">  Node lastv = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">while</span> (root不是空指针 <span class="keyword">or</span> S非空) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root 不是空指针) &#123;</span><br><span class="line">      <span class="comment">// 入栈</span></span><br><span class="line">      S.push(root);</span><br><span class="line">      <span class="comment">// 将指针向左子树方向移动</span></span><br><span class="line">      root = root-&gt;left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// root为空指针</span></span><br><span class="line">      <span class="comment">// 栈顶节点当前节点，查看当前节点</span></span><br><span class="line">      root = S.top();</span><br><span class="line">      <span class="keyword">if</span> (root-&gt;right为空指针 <span class="keyword">or</span> root-&gt;right==lastv) &#123;</span><br><span class="line">        <span class="comment">// 表明右子树为空或者已经访问过了。</span></span><br><span class="line">        <span class="comment">// 弹出当前节点</span></span><br><span class="line">        S.pop();</span><br><span class="line">        <span class="comment">// 打印节点值</span></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;root-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// 记录当前节点已经被访问完毕了</span></span><br><span class="line">        lastv = root;</span><br><span class="line">        <span class="comment">// root设为空指针，便于继续向上递归</span></span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 表明右子树还未访问且右子树非空</span></span><br><span class="line">        <span class="comment">// 将指针向右子树方向移动</span></span><br><span class="line">      	root = root-&gt;right;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2020-02-17.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/17/LeetCode(1320.%20Minimum%20Distance%20to%20Type%20a%20Word%20Using%20Two%20Fingers)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/17/LeetCode(1320.%20Minimum%20Distance%20to%20Type%20a%20Word%20Using%20Two%20Fingers)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1320. Minimum Distance to Type a Word Using Two Fingers)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-17 23:34:40 / 修改时间：23:34:41" itemprop="dateCreated datePublished" datetime="2020-02-17T23:34:40+08:00">2020-02-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="LeetCode-1320-Minimum-Distance-to-Type-a-Word-Using-Two-Fingers-题解"><a href="#LeetCode-1320-Minimum-Distance-to-Type-a-Word-Using-Two-Fingers-题解" class="headerlink" title="LeetCode(\1320. Minimum Distance to Type a Word Using Two Fingers)题解"></a>LeetCode(\1320. Minimum Distance to Type a Word Using Two Fingers)题解</h2><p><img src="https://assets.leetcode.com/uploads/2020/01/02/leetcode_keyboard.png" alt="img"></p>
<p>You have a keyboard layout as shown above in the XY plane, where each English uppercase letter is located at some coordinate, for example, the letter <strong>A</strong> is located at coordinate <strong>(0,0)</strong>, the letter <strong>B</strong> is located at coordinate <strong>(0,1)</strong>, the letter <strong>P</strong> is located at coordinate <strong>(2,3)</strong> and the letter <strong>Z</strong> is located at coordinate <strong>(4,1)</strong>.</p>
<p>Given the string <code>word</code>, return the minimum total distance to type such string using only two fingers. The distance between coordinates <strong>(x1,y1)</strong> and <strong>(x2,y2)</strong> is <strong>|x1 - x2| + |y1 - y2|</strong>. </p>
<p>Note that the initial positions of your two fingers are considered free so don’t count towards your total distance, also your two fingers do not have to start at the first letter or the first two letters.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: word &#x3D; &quot;CAKE&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: </span><br><span class="line">Using two fingers, one optimal way to type &quot;CAKE&quot; is: </span><br><span class="line">Finger 1 on letter &#39;C&#39; -&gt; cost &#x3D; 0 </span><br><span class="line">Finger 1 on letter &#39;A&#39; -&gt; cost &#x3D; Distance from letter &#39;C&#39; to letter &#39;A&#39; &#x3D; 2 </span><br><span class="line">Finger 2 on letter &#39;K&#39; -&gt; cost &#x3D; 0 </span><br><span class="line">Finger 2 on letter &#39;E&#39; -&gt; cost &#x3D; Distance from letter &#39;K&#39; to letter &#39;E&#39; &#x3D; 1 </span><br><span class="line">Total distance &#x3D; 3</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: word &#x3D; &quot;HAPPY&quot;</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: </span><br><span class="line">Using two fingers, one optimal way to type &quot;HAPPY&quot; is:</span><br><span class="line">Finger 1 on letter &#39;H&#39; -&gt; cost &#x3D; 0</span><br><span class="line">Finger 1 on letter &#39;A&#39; -&gt; cost &#x3D; Distance from letter &#39;H&#39; to letter &#39;A&#39; &#x3D; 2</span><br><span class="line">Finger 2 on letter &#39;P&#39; -&gt; cost &#x3D; 0</span><br><span class="line">Finger 2 on letter &#39;P&#39; -&gt; cost &#x3D; Distance from letter &#39;P&#39; to letter &#39;P&#39; &#x3D; 0</span><br><span class="line">Finger 1 on letter &#39;Y&#39; -&gt; cost &#x3D; Distance from letter &#39;A&#39; to letter &#39;Y&#39; &#x3D; 4</span><br><span class="line">Total distance &#x3D; 6</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: word &#x3D; &quot;NEW&quot;</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: word &#x3D; &quot;YEAR&quot;</span><br><span class="line">Output: 7</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>2 &lt;= word.length &lt;= 300</code></li>
<li>Each <code>word[i]</code> is an English uppercase letter.</li>
</ul>
<h2 id="解题思路-DP"><a href="#解题思路-DP" class="headerlink" title="解题思路(DP)"></a>解题思路(DP)</h2><p>Hard</p>
<p>计算二指输入最短距离。设定26个字母之间的距离，给定一个字符串，现在你有两个手指依次打出这些字符，求最小的手指移动距离，注意手指的起始按键不用计入距离，起始的不一定必须是开始两个字母。</p>
<p>使用DP</p>
<p>D[i][j][k]表示在0~k-1的字符中，左边手指在i位置，右边手指在j位置时所取得的最小距离，依据推论i和j中肯定有一个k。i和j一共有26种状态。</p>
<p>那么我们观察如果第k个字符输入，我们应该是用第一个手指还是第二个手指去键入呢？假设输入的第k个字符的位置为v，状态更新为：</p>
<ul>
<li>左指：D[v][j][k+1] = D[i][j][k] + dis(i, v)</li>
<li>右指：D[i][v][k+1] = D[i][j][k] + dis(j, v)</li>
</ul>
<p>最后在k=n的情况下遍历所有的ij方案即可得到答案。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，为 $O(n\times 26 \times 26)$，空间上同样为$O(n\times 26 \times 26)$。</p>
<p><code>Runtime: 52 ms, faster than 57.62% of C++ online submissions for Minimum Distance to Type a Word Using Two Fingers.</code></p>
<p><code>Memory Usage: 33 MB, less than 100.00% of C++ online submissions for Minimum Distance to Type a Word Using Two Fingers.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dis</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">abs</span>(a%<span class="number">6</span> - b%<span class="number">6</span>) + <span class="built_in">abs</span>(a/<span class="number">6</span> - b/<span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(<span class="built_in">string</span> <span class="keyword">word</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="keyword">word</span>.<span class="built_in">size</span>(), res = INT_MAX;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&gt; <span class="title">D</span><span class="params">(<span class="number">26</span>, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;(<span class="number">26</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(len+<span class="number">1</span>, INT_MAX)))</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">26</span>; j++) D[i][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=len; k++) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = <span class="keyword">word</span>[k<span class="number">-1</span>] - <span class="string">'A'</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">26</span>; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (D[i][j][k<span class="number">-1</span>] == INT_MAX) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="comment">// left finger</span></span><br><span class="line">                    D[v][j][k] = <span class="built_in">min</span>(D[v][j][k], D[i][j][k<span class="number">-1</span>] + dis(v, i));</span><br><span class="line">                    <span class="comment">// right finger</span></span><br><span class="line">                    D[i][v][k] = <span class="built_in">min</span>(D[i][v][k], D[i][j][k<span class="number">-1</span>] + dis(v, j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">26</span>; j++) &#123;</span><br><span class="line">                res = <span class="built_in">min</span>(res, D[i][j][len]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>BitBrave，2020-02-17</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/15/LeetCode(1310.%20XOR%20Queries%20of%20a%20Subarray)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/15/LeetCode(1310.%20XOR%20Queries%20of%20a%20Subarray)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1310. XOR Queries of a Subarray)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-15 20:44:08 / 修改时间：20:44:15" itemprop="dateCreated datePublished" datetime="2020-02-15T20:44:08+08:00">2020-02-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1310-XOR-Queries-of-a-Subarray-题解"><a href="#LeetCode-1310-XOR-Queries-of-a-Subarray-题解" class="headerlink" title="LeetCode(\1310. XOR Queries of a Subarray)题解"></a>LeetCode(\1310. XOR Queries of a Subarray)题解</h1><p>Given the array <code>arr</code> of positive integers and the array <code>queries</code> where <code>queries[i] = [Li, Ri]</code>, for each query <code>i</code> compute the <strong>XOR</strong> of elements from <code>Li</code> to <code>Ri</code> (that is, <code>arr[Li] **xor** arr[Li+1] **xor** ... **xor** arr[Ri]</code> ). Return an array containing the result for the given <code>queries</code>.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [1,3,4,8], queries &#x3D; [[0,1],[1,2],[0,3],[3,3]]</span><br><span class="line">Output: [2,7,14,8] </span><br><span class="line">Explanation: </span><br><span class="line">The binary representation of the elements in the array are:</span><br><span class="line">1 &#x3D; 0001 </span><br><span class="line">3 &#x3D; 0011 </span><br><span class="line">4 &#x3D; 0100 </span><br><span class="line">8 &#x3D; 1000 </span><br><span class="line">The XOR values for queries are:</span><br><span class="line">[0,1] &#x3D; 1 xor 3 &#x3D; 2 </span><br><span class="line">[1,2] &#x3D; 3 xor 4 &#x3D; 7 </span><br><span class="line">[0,3] &#x3D; 1 xor 3 xor 4 xor 8 &#x3D; 14 </span><br><span class="line">[3,3] &#x3D; 8</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [4,8,2,10], queries &#x3D; [[2,3],[1,3],[0,0],[0,3]]</span><br><span class="line">Output: [8,0,4,4]</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= arr.length &lt;= 3 * 10^4</code></li>
<li><code>1 &lt;= arr[i] &lt;= 10^9</code></li>
<li><code>1 &lt;= queries.length &lt;= 3 * 10^4</code></li>
<li><code>queries[i].length == 2</code></li>
<li><code>0 &lt;= queries[i][0] &lt;= queries[i][1] &lt; arr.length</code></li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Medium</p>
<p>给一个数组arr，每个元素都是非负数。给一个查询数组queries，每个元素是一个坐标区间 $[left, right]$ 。返回这个坐标区间的所有arr元素的异或值。</p>
<p>这个题很简单，我们注意到一个性质，两个相同的数异或等于0，0和任何数异或都等于原来的数。所以，我们可以首先构建一个数组arrS，其中arrS[i+1]表示arr[0]~arr[i]的异或值。所以区间 $[left, right]$ 的结果为：</p>
<ul>
<li>arrS[right+1] - arrS[left]</li>
</ul>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，只需要填充arrS数组，后续只是O(1)的计算时间，因此为O(n)。空间上，O(n)。</p>
<p><code>Runtime: 152 ms, faster than 24.42% of C++ online submissions for XOR Queries of a Subarray.</code></p>
<p><code>Memory Usage: 29 MB, less than 100.00% of C++ online submissions for XOR Queries of a Subarray.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">xorQueries</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; queries)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;int&gt; arrS(len + 1, 0), res;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=len; i++) &#123;</span><br><span class="line">            arrS[i] = arrS[i<span class="number">-1</span>] ^ arr[i<span class="number">-1</span>];</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; q : queries) &#123;</span><br><span class="line">            res.push_back(arrS[q[<span class="number">1</span>]+<span class="number">1</span>] ^ arrS[q[<span class="number">0</span>]]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-15（以后估计会很少上传题解了，因为很多题感觉直接就会做了，遇到那种需要思考很久的才会传上来。但估计还是会有很多很多不会的吧···）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/13/LeetCode(1345.%20Jump%20Game%20IV)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/13/LeetCode(1345.%20Jump%20Game%20IV)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1345. Jump Game IV)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-13 21:50:39 / 修改时间：21:50:40" itemprop="dateCreated datePublished" datetime="2020-02-13T21:50:39+08:00">2020-02-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1345-Jump-Game-IV-题解"><a href="#LeetCode-1345-Jump-Game-IV-题解" class="headerlink" title="LeetCode(\1345. Jump Game IV)题解"></a>LeetCode(\1345. Jump Game IV)题解</h1><p>Given an array of integers <code>arr</code>, you are initially positioned at the first index of the array.</p>
<p>In one step you can jump from index <code>i</code> to index:</p>
<ul>
<li><code>i + 1</code> where: <code>i + 1 &lt; arr.length</code>.</li>
<li><code>i - 1</code> where: <code>i - 1 &gt;= 0</code>.</li>
<li><code>j</code> where: <code>arr[i] == arr[j]</code> and <code>i != j</code>.</li>
</ul>
<p>Return <em>the minimum number of steps</em> to reach the <strong>last index</strong> of the array.</p>
<p>Notice that you can not jump outside of the array at any time.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [100,-23,-23,404,100,23,23,23,3,404]</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: You need three jumps from index 0 --&gt; 4 --&gt; 3 --&gt; 9. Note that index 9 is the last index of the array.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [7]</span><br><span class="line">Output: 0</span><br><span class="line">Explanation: Start index is the last index. You don&#39;t need to jump.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [7,6,9,6,9,6,9,7]</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: You can jump directly from index 0 to index 7 which is last index of the array.</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [6,1,9]</span><br><span class="line">Output: 2</span><br></pre></td></tr></table></figure>

<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: arr &#x3D; [11,22,7,7,7,7,7,7,7,22,13]</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= arr.length &lt;= 5 * 10^4</code></li>
<li><code>-10^8 &lt;= arr[i] &lt;= 10^8</code></li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给定一个一维数组A，从index=0开始，每次可以向右或者向左走一步，或者跳到与当前值一样的位置上去。请问最少多少次就可以走到最右边。注意每次都不能跳到数组外面。</p>
<p>这个题明显使用BFS，从0位置出发，将可以到达的位置放入队列中，然后遍历，注意不能放入已经遍历过的位置。</p>
<p>一个小Trick：删除掉挨着的相同元素，因为重复了，最优的方案一定不会移动到左右与自己挨着并且与自己相同元素的位置的，但是注意第一个开头挨着的两个不能删除，因为a、a、b这样形式还是会向右移动的。不这样在最后一个案例会超时的。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上所有的点其实只需要判断一次，判断连接每个最多需要n次，因此为 $O(n^2)$。空间上，最多全部入队，为 $O(n)$。</p>
<p><code>Runtime: 188 ms, faster than 42.91% of C++ online submissions for Jump Game IV.</code></p>
<p><code>Memory Usage: 32.2 MB, less than 100.00% of C++ online submissions for Jump Game IV.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">sub</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">tmp</span><span class="params">(&#123;arr[<span class="number">0</span>]&#125;)</span></span>;</span><br><span class="line">        <span class="keyword">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span> (len &gt; <span class="number">1</span>) tmp.push_back(arr[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] != arr[i<span class="number">-1</span>]) tmp.push_back(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minJumps</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// A strick</span></span><br><span class="line">        arr = sub(arr);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> len = arr.<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; M;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (M.<span class="built_in">find</span>(arr[i]) == M.<span class="built_in">end</span>()) M[arr[i]] = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(&#123;i&#125;);</span><br><span class="line">            <span class="keyword">else</span> M[arr[i]].push_back(i);</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; <span class="title">visit</span><span class="params">(len, <span class="literal">false</span>)</span></span>;</span><br><span class="line">        Q.push(<span class="number">0</span>);</span><br><span class="line">        visit[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (!Q.empty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> qlen = Q.<span class="built_in">size</span>();</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">while</span> (qlen-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> p = Q.front(); Q.pop();</span><br><span class="line">                <span class="keyword">if</span> (p == len - <span class="number">1</span>) <span class="keyword">return</span> res - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (p &gt; <span class="number">0</span> <span class="keyword">and</span> visit[p<span class="number">-1</span>] == <span class="literal">false</span>) &#123;</span><br><span class="line">                    Q.push(p<span class="number">-1</span>);</span><br><span class="line">                    visit[p<span class="number">-1</span>] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (p &lt; len<span class="number">-1</span> <span class="keyword">and</span> visit[p+<span class="number">1</span>] == <span class="literal">false</span>) &#123;</span><br><span class="line">                    Q.push(p+<span class="number">1</span>);</span><br><span class="line">                    visit[p+<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> m : M[arr[p]]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (m != p <span class="keyword">and</span> visit[m] == <span class="literal">false</span>) &#123;</span><br><span class="line">                        Q.push(m);</span><br><span class="line">                        visit[m] = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave， 2020-02-13</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/13/LeetCode(1349.%20Maximum%20Students%20Taking%20Exam)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/13/LeetCode(1349.%20Maximum%20Students%20Taking%20Exam)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1349. Maximum Students Taking Exam)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-13 19:11:56 / 修改时间：19:12:00" itemprop="dateCreated datePublished" datetime="2020-02-13T19:11:56+08:00">2020-02-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1349-Maximum-Students-Taking-Exam-题解"><a href="#LeetCode-1349-Maximum-Students-Taking-Exam-题解" class="headerlink" title="LeetCode(\1349. Maximum Students Taking Exam)题解"></a>LeetCode(\1349. Maximum Students Taking Exam)题解</h1><p>Given a <code>m * n</code> matrix <code>seats</code> that represent seats distributions in a classroom. If a seat is broken, it is denoted by <code>&#39;#&#39;</code> character otherwise it is denoted by a <code>&#39;.&#39;</code> character.</p>
<p>Students can see the answers of those sitting next to the left, right, upper left and upper right, but he cannot see the answers of the student sitting directly in front or behind him. Return the <strong>maximum</strong> number of students that can take the exam together without any cheating being possible..</p>
<p>Students must be placed in seats in good condition.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/01/29/image.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: seats &#x3D; [[&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;],</span><br><span class="line">                [&quot;.&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;],</span><br><span class="line">                [&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;]]</span><br><span class="line">Output: 4</span><br><span class="line">Explanation: Teacher can place 4 students in available seats so they don&#39;t cheat on the exam.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: seats &#x3D; [[&quot;.&quot;,&quot;#&quot;],</span><br><span class="line">                [&quot;#&quot;,&quot;#&quot;],</span><br><span class="line">                [&quot;#&quot;,&quot;.&quot;],</span><br><span class="line">                [&quot;#&quot;,&quot;#&quot;],</span><br><span class="line">                [&quot;.&quot;,&quot;#&quot;]]</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: Place all students in available seats.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: seats &#x3D; [[&quot;#&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;#&quot;],</span><br><span class="line">                [&quot;.&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;.&quot;],</span><br><span class="line">                [&quot;.&quot;,&quot;.&quot;,&quot;#&quot;,&quot;.&quot;,&quot;.&quot;],</span><br><span class="line">                [&quot;.&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;.&quot;],</span><br><span class="line">                [&quot;#&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;#&quot;]]</span><br><span class="line">Output: 10</span><br><span class="line">Explanation: Place students in available seats in column 1, 3 and 5.</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>seats</code> contains only characters <code>&#39;.&#39; and``&#39;#&#39;.</code></li>
<li><code>m == seats.length</code></li>
<li><code>n == seats[i].length</code></li>
<li><code>1 &lt;= m &lt;= 8</code></li>
<li><code>1 &lt;= n &lt;= 8</code></li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给出一个 $m\times n$ 矩阵表示考试教室的位置，其中标记为’.’的为有座位的，标记为’#’的为没座位的。一个学生可以抄到自己左边右边，左上、右上四个位置的同学的答案（如果对应位置有座位并且有学生坐的话）。请问这个教室可以在保证没人作弊的情况下，最多坐多少学生。</p>
<p>这个题使用DP解决。按行遍历，每次根据上一行确定当前行的选择，因为m和n不大，因此可以遍历所有方案。这里其实不能使用一般的DP，因为一个点的确定需要考虑左右和上左、上右，普通的DP很难构造出有效的状态转移。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，$O(n \times 2^m)$。空间上，$O(n \times 2^m)$。</p>
<p><code>Runtime: 56 ms, faster than 15.49% of C++ online submissions for Maximum Students Taking Exam.</code></p>
<p><code>Memory Usage: 22.3 MB, less than 100.00% of C++ online submissions for Maximum Students Taking Exam.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; M;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="built_in">string</span> R_, <span class="built_in">string</span> s, <span class="keyword">int</span> col, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p &gt; <span class="number">0</span> <span class="keyword">and</span> s[p<span class="number">-1</span>] == <span class="string">'1'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (p &gt; <span class="number">0</span> <span class="keyword">and</span> R_[p<span class="number">-1</span>] == <span class="string">'1'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (p &lt; col<span class="number">-1</span> <span class="keyword">and</span> R_[p+<span class="number">1</span>] == <span class="string">'1'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">scheme</span><span class="params">(<span class="built_in">string</span> R_, <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; R, <span class="built_in">string</span> s, <span class="keyword">int</span> r, <span class="keyword">int</span> col, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p == col) &#123;</span><br><span class="line">            <span class="keyword">if</span> (M.<span class="built_in">find</span>(s) == M.<span class="built_in">end</span>()) M[s] = r;</span><br><span class="line">            <span class="keyword">else</span> M[s] = <span class="built_in">max</span>(M[s], r);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (R[p] == <span class="string">'#'</span> <span class="keyword">or</span> isMatch(R_, s, col, p) == <span class="literal">false</span>) &#123;</span><br><span class="line">            s += <span class="string">'0'</span>;</span><br><span class="line">            scheme(R_, R, s, r, col, p + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        s += <span class="string">'0'</span>;</span><br><span class="line">        scheme(R_, R, s, r, col, p + <span class="number">1</span>);</span><br><span class="line">        s[s.<span class="built_in">size</span>()<span class="number">-1</span>] = <span class="string">'1'</span>;</span><br><span class="line">        scheme(R_, R, s, r + <span class="number">1</span>, col, p + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxStudents</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; seats)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> row = seats.<span class="built_in">size</span>(), col = seats[<span class="number">0</span>].<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        vector&lt;vector&lt;pair&lt;int, string&gt;&gt;&gt; D(row, vector&lt;pair&lt;int, string&gt;&gt;());</span><br><span class="line">        vector&lt;pair&lt;int, string&gt;&gt; R_s(&#123;make_pair(0, string(col, '0'))&#125;);</span><br><span class="line">        ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;row; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (pair&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt; R_ : R_s) scheme(R_.second, seats[i], <span class="string">""</span>, R_.first, col, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter=M.<span class="built_in">begin</span>(); iter!=M.<span class="built_in">end</span>(); iter++) &#123;</span><br><span class="line">                D[i].push_back(make_pair(iter-&gt;second, iter-&gt;first));</span><br><span class="line">            &#125;</span><br><span class="line">            M.<span class="built_in">clear</span>();</span><br><span class="line">            R_s = D[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (pair&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt; s : D[row<span class="number">-1</span>]) res = <span class="built_in">max</span>(res, s.first);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-13</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/12/LeetCode(1316.%20Distinct%20Echo%20Substrings)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/12/LeetCode(1316.%20Distinct%20Echo%20Substrings)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1316. Distinct Echo Substrings)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-12 18:32:01 / 修改时间：18:32:03" itemprop="dateCreated datePublished" datetime="2020-02-12T18:32:01+08:00">2020-02-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1316-Distinct-Echo-Substrings-题解"><a href="#LeetCode-1316-Distinct-Echo-Substrings-题解" class="headerlink" title="LeetCode(\1316. Distinct Echo Substrings)题解"></a>LeetCode(\1316. Distinct Echo Substrings)题解</h1><p>Return the number of <strong>distinct</strong> non-empty substrings of <code>text</code> that can be written as the concatenation of some string with itself (i.e. it can be written as <code>a + a</code> where <code>a</code> is some string).</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: text &#x3D; &quot;abcabcabc&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The 3 substrings are &quot;abcabc&quot;, &quot;bcabca&quot; and &quot;cabcab&quot;.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: text &#x3D; &quot;leetcodeleetcode&quot;</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: The 2 substrings are &quot;ee&quot; and &quot;leetcodeleetcode&quot;.</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= text.length &lt;= 2000</code></li>
<li><code>text</code> has only lowercase English letters.</li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给出一个字符串S，从中寻找a+a模式的连续字符串的个数。</p>
<p>这个题使用R-K哈希做，RK哈希，Rabin_Karp 哈希，通过比较hash值是否相等来比较每个字符串是否相等。有概率出错。</p>
<p>将字符串看做一个 n 进制的数字，通过一个大质数（如 1000000007 ）取模，取得字符串的值。</p>
<p>这里使用无符号 64 位整数来存储哈希值，并通过 C++ 自然溢出的处理方式来取模。</p>
<p>因为有26个字母，选择27进制。注意一点是27进制，’a’不能被视为 0 否则 aa 和 a 就相同了。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>时间上，$O(n^2)$，如果直接比较的话，时间复杂度其实是$O(n^3)$。空间上，$O(n^2)$。</p>
<p><code>Runtime: 272 ms, faster than 68.21% of C++ online submissions for Distinct Echo Substrings.</code></p>
<p><code>Memory Usage: 196.3 MB, less than 100.00% of C++ online submissions for Distinct Echo Substrings.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">distinctEchoSubstrings</span><span class="params">(<span class="built_in">string</span> <span class="built_in">text</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, len = <span class="built_in">text</span>.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">long</span> &gt; S;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">long</span> &gt;&gt; <span class="title">V</span><span class="params">(len, <span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">long</span> &gt;(len, <span class="number">0</span>))</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) V[i][i] = <span class="built_in">text</span>[i] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> v=<span class="number">1</span>; v&lt;len; v++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> l=<span class="number">0</span>, r=l+v; r&lt;len; l++, r++) &#123;</span><br><span class="line">                V[l][r] = V[l][r<span class="number">-1</span>] * <span class="number">27</span> + <span class="built_in">text</span>[r] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">0</span>; v &lt; len; v++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> l = i + v + <span class="number">1</span>, r = l + v;</span><br><span class="line">                <span class="keyword">if</span> (r &gt;= len) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (V[i][i+v] == V[l][r] <span class="keyword">and</span> S.<span class="built_in">find</span>(V[l][r]) == S.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                    res++;</span><br><span class="line">                    S.insert(V[l][r]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2020-02-12</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">XJ</p>
  <div class="site-description" itemprop="description">幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">363</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XJ</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
