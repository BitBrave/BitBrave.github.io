<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
<meta property="og:type" content="website">
<meta property="og:title" content="BitBrave">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="BitBrave">
<meta property="og:description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="XJ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>BitBrave</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7e6d55cf2fa14e729703953237f65413";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">BitBrave</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">IIE</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/06/LeetCode(503.%20Next%20Greater%20Element%20II)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/06/LeetCode(503.%20Next%20Greater%20Element%20II)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(503. Next Greater Element II)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-06 21:54:36 / 修改时间：23:27:12" itemprop="dateCreated datePublished" datetime="2020-03-06T21:54:36+08:00">2020-03-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-503-Next-Greater-Element-II-题解"><a href="#LeetCode-503-Next-Greater-Element-II-题解" class="headerlink" title="LeetCode(\503. Next Greater Element II)题解"></a>LeetCode(\503. Next Greater Element II)题解</h1><p>Given a circular array (the next element of the last element is the first element of the array), print the Next Greater Number for every element. The Next Greater Number of a number x is the first greater number to its traversing-order next in the array, which means you could search circularly to find its next greater number. If it doesn’t exist, output -1 for this number.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,2,1]</span><br><span class="line">Output: [2,-1,2]</span><br><span class="line">Explanation: The first 1&#39;s next greater number is 2; </span><br><span class="line">The number 2 can&#39;t find next greater number; </span><br><span class="line">The second 1&#39;s next greater number needs to search circularly, which is also 2.</span><br></pre></td></tr></table></figure>



<p><strong>Note:</strong> The length of given array won’t exceed 10000.</p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Medium</p>
<p>给出一维数组nums，不过这个数组是环形的，首尾相连。要求找出每个元素右边第一个比自己大的元素，如果不存在就设为-1.比如132，最终返回的答案是3，-1，3，因为2向右走会回到第一个。</p>
<p>这个题的简单的一个版本是数组不是收尾相连的。对于这种题的解法最简单的就是对每一个元素遍历其它元素，找出对应的值，时间复杂度$O(n^2)$。</p>
<p>但是可以用stack在$O(n)$的时间内解决，对于不是首尾相连的数组，我们可以维护一个递减栈，这里有两种方式。</p>
<ul>
<li>从后往前遍历，利用栈顶元素来更新即将入栈的元素。遍历到一个元素a，如果栈空，表示a后边没有比自己大的元素了，将a元素对应的值设为-1然后将a入栈，否则查看a是否小于栈顶元素，如果小于，就说明栈顶元素就是a右边离自己最近的比自己大的元素，直接设为栈顶元素即可，如果大于等于，说明当前栈顶元素不会再在后面的遍历中用到了，直接出栈即可。持续出栈直到栈为空或者栈顶元素大于a，然后按照上面的论述设定a对应的值。最后将a入栈。</li>
<li>从前往后遍历，利用即将入栈的元素来更新栈顶元素，遍历到到一个元素a，如果栈空，表示a前边没有可以更新的元素了，将a入栈，否则查看a是否大于栈顶元素，如果大于，就说明栈顶元素的右边离自己大的最近的就是a，将栈顶元素的对应值更新为a然后将出栈，持续出栈并更新直到栈顶元素的值大于等于a或者栈空，这时候a就不能更新栈顶元素了，将a入栈。最后所有没有更新过的值就是-1。</li>
</ul>
<p>在处理数组为环形的时候，上述两种办法其实也是可以的，只不过要稍稍变换下思路。我们可以将数组double一下，将两个一样的nums拼接成一个，等于遍历数组两次，然后使用上面的方法更新即可。</p>
<ul>
<li>从前往后遍历，第一次遍历数组nums，按照单向数组一样的方式更新，然后再次遍历一遍使用相同的额处理方式遍历数组，第二次遍历的时候，栈中已经存在了之前遍历留下的元素，就等于可以使用数组前边的元素来更新数组后边的值了。</li>
<li>从后往前遍历，第一次遍历数组nums，按照单向数组一样的方式处理，但是不更新每个元素的对应的值，第一次主要是为了在栈中留下数组内前边的值。然后第二次遍历的时候，还是使用同样的方式，只不过这一次开始更新每个元素的对应的值。其实第一次更新不更新每个元素的值都一样的。</li>
</ul>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>时间上，$O(n)$，空间上，$O(n)$。</p>
<h3 id="从后往前遍历"><a href="#从后往前遍历" class="headerlink" title="从后往前遍历"></a>从后往前遍历</h3><p><code>Runtime: 84 ms, faster than 92.25% of C++ online submissions for Next Greater Element II.</code></p>
<p><code>Memory Usage: 11.5 MB, less than 100.00% of C++ online submissions for Next Greater Element II.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">nextGreaterElements</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">res</span><span class="params">(len, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; S;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=len<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!S.empty() <span class="keyword">and</span> nums[i] &gt;= S.top()) S.pop();</span><br><span class="line">            S.push(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=len<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!S.empty() <span class="keyword">and</span> nums[i] &gt;= S.top()) S.pop();</span><br><span class="line">            <span class="keyword">if</span> (S.empty()) res[i] = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">else</span> res[i] = S.top();</span><br><span class="line">            S.push(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="从前往后遍历"><a href="#从前往后遍历" class="headerlink" title="从前往后遍历"></a>从前往后遍历</h3><p><code>Runtime: 84 ms, faster than 92.25% of C++ online submissions for Next Greater Element II.</code></p>
<p><code>Memory Usage: 11.7 MB, less than 100.00% of C++ online submissions for Next Greater Element II.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">nextGreaterElements</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">res</span><span class="params">(len, <span class="number">-1</span>)</span></span>;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; S;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!S.empty() <span class="keyword">and</span> nums[i] &gt; nums[S.top()]) &#123;</span><br><span class="line">                res[S.top()] = nums[i];</span><br><span class="line">                S.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            S.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!S.empty() <span class="keyword">and</span> nums[i] &gt; nums[S.top()]) &#123;</span><br><span class="line">                res[S.top()] = nums[i];</span><br><span class="line">                S.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            S.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-03-06</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/05/LeetCode(456.%20132%20Pattern)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/05/LeetCode(456.%20132%20Pattern)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(456. 132 Pattern)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-05 23:04:42 / 修改时间：23:04:54" itemprop="dateCreated datePublished" datetime="2020-03-05T23:04:42+08:00">2020-03-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-456-132-Pattern-题解"><a href="#LeetCode-456-132-Pattern-题解" class="headerlink" title="LeetCode(\456. 132 Pattern)题解"></a>LeetCode(\456. 132 Pattern)题解</h1><p>Given a sequence of n integers a1, a2, …, an, a 132 pattern is a subsequence a<strong>i</strong>, a<strong>j</strong>, a<strong>k</strong> such that <strong>i</strong> &lt; <strong>j</strong> &lt; <strong>k</strong> and a<strong>i</strong> &lt; a<strong>k</strong> &lt; a<strong>j</strong>. Design an algorithm that takes a list of n numbers as input and checks whether there is a 132 pattern in the list.</p>
<p><strong>Note:</strong> n will be less than 15,000.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: [1, 2, 3, 4]</span><br><span class="line"></span><br><span class="line">Output: False</span><br><span class="line"></span><br><span class="line">Explanation: There is no 132 pattern in the sequence.</span><br></pre></td></tr></table></figure>



<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: [3, 1, 4, 2]</span><br><span class="line"></span><br><span class="line">Output: True</span><br><span class="line"></span><br><span class="line">Explanation: There is a 132 pattern in the sequence: [1, 4, 2].</span><br></pre></td></tr></table></figure>



<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: [-1, 3, 2, 0]</span><br><span class="line"></span><br><span class="line">Output: True</span><br><span class="line"></span><br><span class="line">Explanation: There are three 132 patterns in the sequence: [-1, 3, 2], [-1, 3, 0] and [-1, 2, 0].</span><br></pre></td></tr></table></figure>

<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Medium</p>
<p>给定一个整数数组A，判断其中是否存在这样的模式：有三个位置，i&lt;j&lt;k。每个位置上的元素关系为Ai&lt;Ak&lt;Aj即132模式，如果有这样的模式存在就返回True，否则False。</p>
<p>这个题明确使用Stack，可以在线性时间内解决，但是我只能想到平方的解法，就是以每个元素Aj，分别寻找左边最小的和右边比当前值小的最大值，然后判断。参考网上别人的解法才发现，Stack实在是太美妙了。</p>
<p>我们如何来利用Stack呢？</p>
<p>可以这样想，我们找到一个元素a，只要得到左边的最小元素b和右边的比a小的数中最大的那个c，只要bac满足条件，那么算法就以True结束了，如果不满足，那么以这个元素a作为中间值肯定是不可以的。找元素左边最小的很容易，我们O(n)的时间就可以，主要是如何寻找c？</p>
<p>这里可以用一个Stack来，我们可以维护一个递减栈，一般来说一个递减栈是用来确定一个元素离它最近的比他大的元素值的。但是我们在递减栈出栈的过程中，记录下最后那个出栈的元素，那么那个元素就是比当前元素小的元素中，最大的那个了。</p>
<p>因此，再完善一点，算法的流程就是：</p>
<ul>
<li>我们构建一个Stack（存储一个递减序列），从数组A的后边向前边遍历，设定一个整数s记录最近出栈的元素，初始化s=INT_MIN。</li>
<li>从后向前遍历元素，走到元素a时，判断a是否小于s，如果小于，说明s已经被更新了，栈内肯定插入了更大值，因为从后向前遍历，这个更大值的位置肯定在s和a之间，因此符合132的模式，返回True。否则进行下一步。</li>
<li>如果栈为空，直接将a入栈，否则判断元素是否大于栈顶元素，如果大于，那么就不断出栈直到栈为空或者a小于等于栈顶元素，然后将a入栈，此时s更新为最近一次出栈的元素，因为是个递减栈，所以s一定小于a同时s是数组右边小于a的元素中最大的那个，此时也可以说s元素的左边一定有一个比他的大的元素存在。</li>
<li>重复上述操作，知道遍历完整个数组才退出循环，表示这个数组内不存在132的模式，否则肯定会提前结束循环。因此直接返回False。</li>
</ul>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，$O(N)$，空间上，$O(N)$。</p>
<p><code>Runtime: 24 ms, faster than 82.89% of C++ online submissions for 132 Pattern.</code></p>
<p><code>Memory Usage: 9.4 MB, less than 100.00% of C++ online submissions for 132 Pattern.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">find132pattern</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; S;</span><br><span class="line">        <span class="keyword">int</span> c = INT_MIN, len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=len<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &lt; c) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">while</span> (!S.empty() <span class="keyword">and</span> nums[i] &gt; S.top()) &#123;</span><br><span class="line">                c = S.top();</span><br><span class="line">                S.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            S.push(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-03-05</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/03/LeetCode(1368.%20Minimum%20Cost%20to%20Make%20at%20Least%20One%20Valid%20Path%20in%20a%20Grid)%E5%91%A8%E8%B5%9B%E7%AC%AC4%E9%A2%98%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/03/LeetCode(1368.%20Minimum%20Cost%20to%20Make%20at%20Least%20One%20Valid%20Path%20in%20a%20Grid)%E5%91%A8%E8%B5%9B%E7%AC%AC4%E9%A2%98%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1368. Minimum Cost to Make at Least One Valid Path in a Grid)周赛第4题题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-03 23:43:15 / 修改时间：23:43:16" itemprop="dateCreated datePublished" datetime="2020-03-03T23:43:15+08:00">2020-03-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1368-Minimum-Cost-to-Make-at-Least-One-Valid-Path-in-a-Grid-周赛第4题题解"><a href="#LeetCode-1368-Minimum-Cost-to-Make-at-Least-One-Valid-Path-in-a-Grid-周赛第4题题解" class="headerlink" title="LeetCode(\1368. Minimum Cost to Make at Least One Valid Path in a Grid)周赛第4题题解"></a>LeetCode(\1368. Minimum Cost to Make at Least One Valid Path in a Grid)周赛第4题题解</h1><p>Given a <em>m</em> x <em>n</em> <code>grid</code>. Each cell of the <code>grid</code> has a sign pointing to the next cell you should visit if you are currently in this cell. The sign of <code>grid[i][j]</code> can be:</p>
<ul>
<li><strong>1</strong> which means go to the cell to the right. (i.e go from <code>grid[i][j]</code> to <code>grid[i][j + 1]</code>)</li>
<li><strong>2</strong> which means go to the cell to the left. (i.e go from <code>grid[i][j]</code> to <code>grid[i][j - 1]</code>)</li>
<li><strong>3</strong> which means go to the lower cell. (i.e go from <code>grid[i][j]</code> to <code>grid[i + 1][j]</code>)</li>
<li><strong>4</strong> which means go to the upper cell. (i.e go from <code>grid[i][j]</code> to <code>grid[i - 1][j]</code>)</li>
</ul>
<p>Notice that there could be some <strong>invalid signs</strong> on the cells of the <code>grid</code> which points outside the <code>grid</code>.</p>
<p>You will initially start at the upper left cell <code>(0,0)</code>. A valid path in the grid is a path which starts from the upper left cell <code>(0,0)</code> and ends at the bottom-right cell <code>(m - 1, n - 1)</code> following the signs on the grid. The valid path <strong>doesn’t have to be the shortest</strong>.</p>
<p>You can modify the sign on a cell with <code>cost = 1</code>. You can modify the sign on a cell <strong>one time only</strong>.</p>
<p>Return <em>the minimum cost</em> to make the grid have at least one valid path.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/02/13/grid1.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: grid &#x3D; [[1,1,1,1],[2,2,2,2],[1,1,1,1],[2,2,2,2]]</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: You will start at point (0, 0).</span><br><span class="line">The path to (3, 3) is as follows. (0, 0) --&gt; (0, 1) --&gt; (0, 2) --&gt; (0, 3) change the arrow to down with cost &#x3D; 1 --&gt; (1, 3) --&gt; (1, 2) --&gt; (1, 1) --&gt; (1, 0) change the arrow to down with cost &#x3D; 1 --&gt; (2, 0) --&gt; (2, 1) --&gt; (2, 2) --&gt; (2, 3) change the arrow to down with cost &#x3D; 1 --&gt; (3, 3)</span><br><span class="line">The total cost &#x3D; 3.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/02/13/grid2.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: grid &#x3D; [[1,1,3],[3,2,2],[1,1,4]]</span><br><span class="line">Output: 0</span><br><span class="line">Explanation: You can follow the path from (0, 0) to (2, 2).</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/02/13/grid3.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: grid &#x3D; [[1,2],[4,3]]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: grid &#x3D; [[2,2,2],[2,2,2]]</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>

<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: grid &#x3D; [[4]]</span><br><span class="line">Output: 0</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>m == grid.length</code></li>
<li><code>n == grid[i].length</code></li>
<li><code>1 &lt;= m, n &lt;= 100</code></li>
</ul>
<p><a href="https://leetcode.com/problems/minimum-cost-to-make-at-least-one-valid-path-in-a-grid/discuss" target="_blank" rel="noopener">Discuss</a></p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>一个M*N大小的矩阵，每个矩阵元素为1234中的一个，分别表示一个方向，左右下上。从左上角开始，到右下角找一条路，我们可以将某个元素改变方向，改一次代价+1。找出代价最小的办法，使得存在至少一条可达的路径。当然，如果不用改就有路径，那就代价为0，是最好的。</p>
<p>这个题一开始可能会想到用DP，但是从左上角到右下角的路径并不是只能向右向下的，而是可以迂回的，所以用DP很难构造出有效的状态转移方程。我是参考了大佬们的解法才发现如下的解法。</p>
<p>将每个元素位置看成一个点，矩阵一共有M*N个点。点与点之间有边相连，一个点有四条边，其原本的方向所指的方向上，边权值为0，其余三条边的边权值为1。那么一个矩阵最终可以转化为一个0-1图。以左上角为源点，右下角为汇点。这个题就可以变为寻找一条由源点到汇点的最短路。可以使用的方法有0-1BFS和Dijkstra。</p>
<h3 id="0-1-BFS"><a href="#0-1-BFS" class="headerlink" title="0-1 BFS"></a>0-1 BFS</h3><p>0-1BFS问题是指最短路问题中，边权只有 0 和 1 的特殊情况。写法类似 SPFA + SLF(Small Label First) 优化。需要一个 deque 。把权值 0 的边扩展到的点放到队首，权值 1 的边扩展到的点放到队尾。时间复杂度 O(V + E) 。</p>
<p>在这个题中，我们准备一个双向队列，和一个二维数组记录左上角到每个点的最短路径长度。首先将左上角的点入队列，然后在队列不空的情况下，弹出队首的点，查看其出边，对于可以松弛的点，就更新长度，同时如果权值为0就将对应的点插入队首，否则插入队尾。直到最后队列为空。</p>
<h3 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，$O(V+E) = O(MN)$，空间上，$O(MN)$。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minCost</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 0-1 BFS</span></span><br><span class="line">        <span class="keyword">int</span> m = grid.<span class="built_in">size</span>(), n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">dis</span><span class="params">(m, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, INT_MAX))</span></span>;</span><br><span class="line">        <span class="built_in">deque</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; Q;</span><br><span class="line">        </span><br><span class="line">        Q.push_back(make_pair(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">        dis[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!Q.empty()) &#123;</span><br><span class="line">            pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; p = Q.front(); Q.pop_front();</span><br><span class="line">            <span class="keyword">int</span> w = <span class="number">0</span>, i = p.first, j = p.second;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// right 1</span></span><br><span class="line">            <span class="keyword">if</span> (j &lt; n<span class="number">-1</span>) &#123;</span><br><span class="line">                w = grid[i][j] == <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dis[i][j] + w &lt; dis[i][j+<span class="number">1</span>]) &#123;</span><br><span class="line">                    dis[i][j+<span class="number">1</span>] = dis[i][j] + w;</span><br><span class="line">                    <span class="keyword">if</span> (w == <span class="number">0</span>) Q.push_front(make_pair(i, j+<span class="number">1</span>));</span><br><span class="line">                    <span class="keyword">else</span> Q.push_back(make_pair(i, j+<span class="number">1</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// left 2</span></span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                w = grid[i][j] == <span class="number">2</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dis[i][j] + w &lt; dis[i][j<span class="number">-1</span>]) &#123;</span><br><span class="line">                    dis[i][j<span class="number">-1</span>] = dis[i][j] + w;</span><br><span class="line">                    <span class="keyword">if</span> (w == <span class="number">0</span>) Q.push_front(make_pair(i, j<span class="number">-1</span>));</span><br><span class="line">                    <span class="keyword">else</span> Q.push_back(make_pair(i, j<span class="number">-1</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// down 3</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; m<span class="number">-1</span>) &#123;</span><br><span class="line">                w = grid[i][j] == <span class="number">3</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dis[i][j] + w &lt; dis[i+<span class="number">1</span>][j]) &#123;</span><br><span class="line">                    dis[i+<span class="number">1</span>][j] = dis[i][j] + w;</span><br><span class="line">                    <span class="keyword">if</span> (w == <span class="number">0</span>) Q.push_front(make_pair(i+<span class="number">1</span>, j));</span><br><span class="line">                    <span class="keyword">else</span> Q.push_back(make_pair(i+<span class="number">1</span>, j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// up 4</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                w = grid[i][j] == <span class="number">4</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dis[i][j] + w &lt; dis[i<span class="number">-1</span>][j]) &#123;</span><br><span class="line">                    dis[i<span class="number">-1</span>][j] = dis[i][j] + w;</span><br><span class="line">                    <span class="keyword">if</span> (w == <span class="number">0</span>) Q.push_front(make_pair(i<span class="number">-1</span>, j));</span><br><span class="line">                    <span class="keyword">else</span> Q.push_back(make_pair(i<span class="number">-1</span>, j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dis[m<span class="number">-1</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h3><p>Dijkstra是用于寻找正权值图中，源点到其它点的最短路径的办法，若有N个节点，时间复杂度一般为$O(n^2)$。</p>
<p>本题中，构建图之后，我们可以直接应用Dijkstra算法求出最短路径长度。</p>
<h3 id="时空复杂度-1"><a href="#时空复杂度-1" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，$O((MN)^2)$，空间上，$O(MN)$。在实际使用中是超时的。。。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;&gt;&amp; visit, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; dis, <span class="keyword">int</span>&amp; x, <span class="keyword">int</span>&amp; y)</span> </span>&#123;</span><br><span class="line">        x = <span class="number">-1</span>;</span><br><span class="line">        y = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (visit[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (x == <span class="number">-1</span> <span class="keyword">or</span> dis[i][j] &lt; dis[x][y]) &#123;</span><br><span class="line">                    x = i;</span><br><span class="line">                    y = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minCost</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Dijkstra</span></span><br><span class="line">        <span class="keyword">int</span> m = grid.<span class="built_in">size</span>(), n = grid[<span class="number">0</span>].<span class="built_in">size</span>(), len = m * n - <span class="number">1</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;&gt; <span class="title">visit</span><span class="params">(m, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(n, <span class="literal">false</span>))</span></span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">dis</span><span class="params">(m, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, INT_MAX))</span></span>;</span><br><span class="line">        </span><br><span class="line">        dis[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;len; k++) &#123;</span><br><span class="line">            <span class="comment">// find the point with shortest path distance in no-visit set</span></span><br><span class="line">            <span class="keyword">int</span> i, j, w;</span><br><span class="line">            <span class="built_in">find</span>(m, n, visit, dis, i, j);</span><br><span class="line">            visit[i][j] = <span class="literal">true</span>;</span><br><span class="line">            <span class="comment">//cout&lt;&lt;"shortest "&lt;&lt;i&lt;&lt;j&lt;&lt;" dis: "&lt;&lt;dis[i][j]&lt;&lt;endl;</span></span><br><span class="line">            <span class="comment">// right 1</span></span><br><span class="line">            w = grid[i][j] == <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (j &lt; n<span class="number">-1</span> <span class="keyword">and</span> dis[i][j] + w &lt; dis[i][j+<span class="number">1</span>]) dis[i][j+<span class="number">1</span>] = dis[i][j] + w;</span><br><span class="line">            <span class="comment">// left 2</span></span><br><span class="line">            w = grid[i][j] == <span class="number">2</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span> <span class="keyword">and</span> dis[i][j] + w &lt; dis[i][j<span class="number">-1</span>]) dis[i][j<span class="number">-1</span>] = dis[i][j] + w;</span><br><span class="line">            <span class="comment">// down 3</span></span><br><span class="line">            w = grid[i][j] == <span class="number">3</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; m<span class="number">-1</span> <span class="keyword">and</span> dis[i][j] + w &lt; dis[i+<span class="number">1</span>][j]) dis[i+<span class="number">1</span>][j] = dis[i][j] + w;</span><br><span class="line">            <span class="comment">// up 4</span></span><br><span class="line">            w = grid[i][j] == <span class="number">4</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> <span class="keyword">and</span> dis[i][j] + w &lt; dis[i<span class="number">-1</span>][j]) dis[i<span class="number">-1</span>][j] = dis[i][j] + w;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dis[m<span class="number">-1</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-03-03</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/02/LeetCode(316.%20Remove%20Duplicate%20Letters)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/02/LeetCode(316.%20Remove%20Duplicate%20Letters)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(316. Remove Duplicate Letters)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-02 22:09:14" itemprop="dateCreated datePublished" datetime="2020-03-02T22:09:14+08:00">2020-03-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-316-Remove-Duplicate-Letters-题解"><a href="#LeetCode-316-Remove-Duplicate-Letters-题解" class="headerlink" title="LeetCode(\316. Remove Duplicate Letters)题解"></a>LeetCode(\316. Remove Duplicate Letters)题解</h1><p>Given a string which contains only lowercase letters, remove duplicate letters so that every letter appears once and only once. You must make sure your result is the smallest in lexicographical order among all possible results.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;bcabc&quot;</span><br><span class="line">Output: &quot;abc&quot;</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;cbacdcbc&quot;</span><br><span class="line">Output: &quot;acdb&quot;</span><br></pre></td></tr></table></figure>

<p><strong>Note:</strong> This question is the same as 1081: <a href="https://leetcode.com/problems/smallest-subsequence-of-distinct-characters/" target="_blank" rel="noopener">https://leetcode.com/problems/smallest-subsequence-of-distinct-characters/</a></p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给出一个字符串s，每个字符都是小写字母。现在要求删除s中重复的字符，最后留下的都是不重复的字符，保证留下来的字符组成的字符串是所有符合条件的字符串中按字典序排列是最小的，返回这个字符串。</p>
<h3 id="解法1，Greedy"><a href="#解法1，Greedy" class="headerlink" title="解法1，Greedy"></a>解法1，Greedy</h3><p>假设我们最终的结果字符串为r，而我们从左到右逐步去确定r的每个位置上的字符。在第k步确定第k个字符。</p>
<p>在第k步，我们已经确定了r[0,k-1]，现在确定第k个，如何去确定这个字符呢？假设这个字符为s[i]，那么一定满足如下条件：1、s中i位置之后的元素集一定包含了s中i之前的元素集，因为如果不是的话就向后遍历会丢掉s中i位置后不包含的i位置之前的元素。2、去除s中i位置之后的字符串中所有的s[i]。满足上面的条件之后，我们在每一步确定的i时，因为要保持字典序最小，因此确定一个贪心策略，s[i]是所有满足上述条件的字符中最小的。这个只要比较一下就好了。</p>
<p>将更新的s中i位置之后的字符串当做新的s，重复上面的1，2步骤，直到s为空。</p>
<h3 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，空间上，除去递归，一次函数运行花费$O(n)$，时间上，每次构建字典和遍历花费$O(n)$，递归$n$，总共$O(n^2)$。</p>
<p><code>Runtime: 92 ms, faster than 7.25% of Python3 online submissions for Remove Duplicate Letters.</code></p>
<p><code>Memory Usage: 12.8 MB, less than 100.00% of Python3 online submissions for Remove Duplicate Letters.</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeDuplicateLetters</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> s == <span class="string">""</span>: <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">        C = Counter(s)</span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, c <span class="keyword">in</span> enumerate(s):</span><br><span class="line">            <span class="keyword">if</span> s[i] &lt; s[k]: k = i</span><br><span class="line">            C[c] -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> C[c] == <span class="number">0</span>: <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> s[k] + self.removeDuplicateLetters(s[k+<span class="number">1</span>:].replace(s[k], <span class="string">''</span>))</span><br></pre></td></tr></table></figure>

<h3 id="解法2，Stack"><a href="#解法2，Stack" class="headerlink" title="解法2，Stack"></a>解法2，Stack</h3><p>我们可以使用栈来求解。从左到右遍历字符串s时，我们来决定哪些字符可以删除。用一个字典记录每个字符出现的次数。当遍历到第i个字符时，我们可以看i的前面字符，假设为第j个字符，如果s[i]&lt;s[j]，同时i之后还有s[j]，那么s[j]就可以删除了。</p>
<p>这里需要注意的是，假如字符串为bcab，最好的答案是bca，应该删除最后一个b，看似与上面的论述相矛盾。因此我们需要用一个栈来记录我们保存的字符，每次删除了字符之后，都会生成一个新的s，然后在这个新的字符串s里面，j=i-1。即i和j是相邻的，只有这样才能保证s[j]删除时不会引发错误。比如bcabc，遍历到a的时候，前面相邻的c可以删除，此时形成babc，这时候就是新的字符串a，又可以将b删除。字符串为bcab的时候，遍历到a时，前面的b与a不相邻，因此不能删除。</p>
<h3 id="时空复杂度-1"><a href="#时空复杂度-1" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，$O(n)$，空间上，$O(n)$。</p>
<p><code>Runtime: 4 ms, faster than 82.46% of C++ online submissions for Remove Duplicate Letters.</code></p>
<p><code>Memory Usage: 8.3 MB, less than 100.00% of C++ online submissions for Remove Duplicate Letters.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">removeDuplicateLetters</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">string</span> res = <span class="string">""</span>;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; M;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">bool</span>&gt; V;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; S;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> c : s) &#123;</span><br><span class="line">            <span class="keyword">if</span> (M.<span class="built_in">find</span>(c) == M.<span class="built_in">end</span>()) M[c] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> M[c]++; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;::iterator iter=M.<span class="built_in">begin</span>(); iter!=M.<span class="built_in">end</span>(); iter++) V[iter-&gt;first] = <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;M.<span class="built_in">size</span>()&lt;&lt;V.<span class="built_in">size</span>()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            M[s[i]]--;</span><br><span class="line">            <span class="keyword">if</span> (V[s[i]] == <span class="literal">true</span>) <span class="keyword">continue</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> (!S.empty() <span class="keyword">and</span> s[i] &lt; s[S.top()] <span class="keyword">and</span> M[s[S.top()]] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                V[s[S.top()]] = <span class="literal">false</span>;</span><br><span class="line">                S.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            S.push(i);</span><br><span class="line">            V[s[i]] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!S.empty()) &#123;</span><br><span class="line">            res = s[S.top()] + res;</span><br><span class="line">            S.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-03-02</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/25/LeetCode(1330.%20Reverse%20Subarray%20To%20Maximize%20Array%20Value)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/25/LeetCode(1330.%20Reverse%20Subarray%20To%20Maximize%20Array%20Value)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1330. Reverse Subarray To Maximize Array Value)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-25 21:10:49 / 修改时间：21:10:51" itemprop="dateCreated datePublished" datetime="2020-02-25T21:10:49+08:00">2020-02-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1330-Reverse-Subarray-To-Maximize-Array-Value-题解"><a href="#LeetCode-1330-Reverse-Subarray-To-Maximize-Array-Value-题解" class="headerlink" title="LeetCode(\1330. Reverse Subarray To Maximize Array Value)题解"></a>LeetCode(\1330. Reverse Subarray To Maximize Array Value)题解</h1><p>You are given an integer array <code>nums</code>. The <em>value</em> of this array is defined as the sum of <code>|nums[i]-nums[i+1]|</code> for all <code>0 &lt;= i &lt; nums.length-1</code>.</p>
<p>You are allowed to select any subarray of the given array and reverse it. You can perform this operation <strong>only once</strong>.</p>
<p>Find maximum possible value of the final array.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums &#x3D; [2,3,1,5,4]</span><br><span class="line">Output: 10</span><br><span class="line">Explanation: By reversing the subarray [3,1,5] the array becomes [2,5,1,3,4] whose value is 10.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums &#x3D; [2,4,9,24,2,1,10]</span><br><span class="line">Output: 68</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 3*10^4</code></li>
<li><code>-10^5 &lt;= nums[i] &lt;= 10^5</code></li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>给出一个整数数组，定义这个数组的和为相邻元素之差的和。现在允许将数组中的某个子数组进行整体翻转，然后计算对应的和。返回数组可得到的最大和。</p>
<p>这个题分析一下可知。有如下几种情况。</p>
<p>如果最优的最大和是不翻转的情况，那么就等于是翻转整个数组。</p>
<p>如果最优的情况下，翻转子串的边界是数组边界，那么用O(n)的时间遍历两次，分别找出是右边界和左边界的情况就可以了。</p>
<p>如果最优的情况下，翻转子串的边界在数组内部，这是最复杂的情况，那么该如何考虑呢？假设我们已经计算出来数组在不翻转的情况下的和S，那么翻转之后其实只是改变了子串和整体数组的交界处的情况，其它地方均没有改变。因此假设边界左端点的值是b，挨着的前一个是a，右端点是c，挨着的后一个是d。那么变换之后的结果其实就是S+abs(d-b)+abs(c-a)-abs(b-a)-abs(d-c)=S+x。只要x大于0，就意味着增量为正，变换会导致结果优化。我们再假设a&lt;=b, c&lt;=d, 那么增量就是2*(c-b). 而分析可知我们要让c尽可能大，b尽可能小。因此我们用两个O(n)的时间。第一次找b，怎么找呢？就是每两个相邻的，选大的那一个，然后在所有对中选对应b最小的那一对。第二次找c就是每两个相邻的，选小的那个，然后在所有的对中选最大的c的那一对。</p>
<p>这里假设了abcd的关系，其实也可以假设其他情况，最后都是一样的。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，O(n)，空间上，O(1)。</p>
<p><code>Runtime: 44 ms, faster than 77.24% of C++ online submissions for Reverse Subarray To Maximize Array Value.</code></p>
<p><code>Memory Usage: 10.8 MB, less than 100.00% of C++ online submissions for Reverse Subarray To Maximize Array Value.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxValueAfterReverse</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (len == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> S = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;len; i++) S += <span class="built_in">abs</span>(nums[i]-nums[i<span class="number">-1</span>]);</span><br><span class="line">        <span class="comment">// 交换的区间左端点是数组的左边界</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len<span class="number">-1</span>; i++) res = <span class="built_in">max</span>(res, S+<span class="built_in">abs</span>(nums[i+<span class="number">1</span>]-nums[<span class="number">0</span>])-<span class="built_in">abs</span>(nums[i+<span class="number">1</span>]-nums[i]));</span><br><span class="line">        <span class="comment">// 交换的区间右端点是数组的右边界</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=len<span class="number">-1</span>; j&gt;<span class="number">0</span>; j--) res = <span class="built_in">max</span>(res, S+<span class="built_in">abs</span>(nums[len<span class="number">-1</span>]-nums[j<span class="number">-1</span>])-<span class="built_in">abs</span>(nums[j]-nums[j<span class="number">-1</span>]));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 交换区间左右端点在数组内部</span></span><br><span class="line">        <span class="comment">// 1. 找出左端点</span></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> ia = <span class="built_in">min</span>(nums[i], nums[i<span class="number">-1</span>]), ib = <span class="built_in">max</span>(nums[i], nums[i<span class="number">-1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">max</span>(nums[i], nums[i<span class="number">-1</span>]) &lt; <span class="built_in">max</span>(nums[l], nums[l<span class="number">-1</span>])) l = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 找出右端点</span></span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;len<span class="number">-1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">min</span>(nums[i], nums[i+<span class="number">1</span>]) &gt; <span class="built_in">min</span>(nums[r], nums[r+<span class="number">1</span>])) r = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否交叉，否就说明增量为负数，直接返回</span></span><br><span class="line">        <span class="comment">//int la = min(nums[l], nums[l-1]), lb = max(nums[l], nums[l-1]);</span></span><br><span class="line">        <span class="comment">//int ra = min(nums[r], nums[r+1]), rb = max(nums[r], nums[r+1]);</span></span><br><span class="line">        <span class="comment">//if (la &lt;= rb and lb &gt;= ra) return res;</span></span><br><span class="line">        res = <span class="built_in">max</span>(res, S+<span class="number">2</span>*(<span class="built_in">min</span>(nums[r], nums[r+<span class="number">1</span>])-<span class="built_in">max</span>(nums[l], nums[l<span class="number">-1</span>])));</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-25</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/23/LeetCode(1363.%20Largest%20Multiple%20of%20Three)%E5%91%A8%E8%B5%9B4%E9%A2%98%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/23/LeetCode(1363.%20Largest%20Multiple%20of%20Three)%E5%91%A8%E8%B5%9B4%E9%A2%98%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1363. Largest Multiple of Three)周赛4题题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-23 15:10:52 / 修改时间：15:57:37" itemprop="dateCreated datePublished" datetime="2020-02-23T15:10:52+08:00">2020-02-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1363-Largest-Multiple-of-Three-周赛4题题解"><a href="#LeetCode-1363-Largest-Multiple-of-Three-周赛4题题解" class="headerlink" title="LeetCode(\1363. Largest Multiple of Three)周赛4题题解"></a>LeetCode(\1363. Largest Multiple of Three)周赛4题题解</h1><p>Given an integer array of <code>digits</code>, return the largest multiple of <strong>three</strong> that can be formed by concatenating some of the given digits in any order.</p>
<p>Since the answer may not fit in an integer data type, return the answer as a string.</p>
<p>If there is no answer return an empty string.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: digits &#x3D; [8,1,9]</span><br><span class="line">Output: &quot;981&quot;</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: digits &#x3D; [8,6,7,1,0]</span><br><span class="line">Output: &quot;8760&quot;</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: digits &#x3D; [1]</span><br><span class="line">Output: &quot;&quot;</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: digits &#x3D; [0,0,0,0,0,0]</span><br><span class="line">Output: &quot;0&quot;</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= digits.length &lt;= 10^4</code></li>
<li><code>0 &lt;= digits[i] &lt;= 9</code></li>
<li>The returning answer must not contain unnecessary leading zeros.</li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给出一个由0-9组成的整数数组，从中选出一些数组成一个大的整数，这个整数要能被3整除，以字符串形式返回最大的合法整数。</p>
<p>这个题虽然是Hard，但是其实并不难，我们只要注意一个性质，一个整数如果能被3整除，那么整数的每个数字相加的和也能被3整除，这是充分必要条件。同时和能被3整除，就是每个元素和3的余数之和也能被被3整除，这也是充分必要的。</p>
<p>因此基于上述性质，我们可以首先把给定的数组分为三堆，一堆M0是0，3，6，9可以被整除的，一堆M1是1，4，7余数为1，一堆M2是2，5，8余数为2。然后M0中肯定是在答案内的最后，M1和M2各自数组中每三个可以组成一个整除3的数放入最终答案，同时M1中1个数和M2中1个数合起来也可以组成一个符合条件的数。因此这里要判断，是联合组成的个数多，还是各自分开组成的位数多。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，主要是排序O(nlogn)，空间上，O(n)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">trans</span> <span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; V)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (V.<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (V[<span class="number">0</span>] == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">        <span class="built_in">string</span> res = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> v : V) res += <span class="keyword">char</span>(<span class="number">48</span> + v);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">largestMultipleOfThree</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; digits)</span> </span>&#123;</span><br><span class="line">        sort(digits.<span class="built_in">begin</span>(), digits.<span class="built_in">end</span>(), cmp);</span><br><span class="line">        <span class="keyword">int</span> m1 = <span class="number">1</span>, m2 = <span class="number">2</span>, i1 = <span class="number">0</span>, i2 = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">M</span><span class="params">(<span class="number">3</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;())</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d : digits) M[d % <span class="number">3</span>].push_back(d);</span><br><span class="line">        </span><br><span class="line">        m1 = M[<span class="number">1</span>].<span class="built_in">size</span>();</span><br><span class="line">        m2 = M[<span class="number">2</span>].<span class="built_in">size</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ((m1/<span class="number">3</span>*<span class="number">3</span>+m2/<span class="number">3</span>*<span class="number">3</span>+<span class="built_in">min</span>(m1-m1/<span class="number">3</span>*<span class="number">3</span>, m2-m2/<span class="number">3</span>*<span class="number">3</span>)*<span class="number">2</span>) &gt;= <span class="built_in">min</span>(m1,m2)*<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (i1=<span class="number">2</span>; i1&lt;m1; i1+=<span class="number">3</span>) M[<span class="number">0</span>].insert(M[<span class="number">0</span>].<span class="built_in">end</span>(), M[<span class="number">1</span>].<span class="built_in">begin</span>()+i1<span class="number">-2</span>, M[<span class="number">1</span>].<span class="built_in">begin</span>()+i1+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">for</span> (i2=<span class="number">2</span>; i2&lt;m2; i2+=<span class="number">3</span>) M[<span class="number">0</span>].insert(M[<span class="number">0</span>].<span class="built_in">end</span>(), M[<span class="number">2</span>].<span class="built_in">begin</span>()+i2<span class="number">-2</span>, M[<span class="number">2</span>].<span class="built_in">begin</span>()+i2+<span class="number">1</span>);</span><br><span class="line">            i1 = <span class="built_in">abs</span>(i1 - m1 - <span class="number">2</span>);</span><br><span class="line">            i2 = <span class="built_in">abs</span>(i2 - m2 - <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span> (i1 &gt;= <span class="number">1</span> <span class="keyword">and</span> i2 &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">                M[<span class="number">0</span>].push_back(M[<span class="number">1</span>][m1-i1]);</span><br><span class="line">                M[<span class="number">0</span>].push_back(M[<span class="number">2</span>][m2-i2]);</span><br><span class="line">                i1--;</span><br><span class="line">                i2--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i1 &gt;= <span class="number">1</span> <span class="keyword">and</span> i2 &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">                M[<span class="number">0</span>].push_back(M[<span class="number">1</span>][m1-i1]);</span><br><span class="line">                M[<span class="number">0</span>].push_back(M[<span class="number">2</span>][m2-i2]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            M[<span class="number">0</span>].insert(M[<span class="number">0</span>].<span class="built_in">end</span>(), M[<span class="number">1</span>].<span class="built_in">begin</span>(), M[<span class="number">1</span>].<span class="built_in">begin</span>()+<span class="built_in">min</span>(m1, m2));</span><br><span class="line">            M[<span class="number">0</span>].insert(M[<span class="number">0</span>].<span class="built_in">end</span>(), M[<span class="number">2</span>].<span class="built_in">begin</span>(), M[<span class="number">2</span>].<span class="built_in">begin</span>()+<span class="built_in">min</span>(m1, m2));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        sort(M[<span class="number">0</span>].<span class="built_in">begin</span>(), M[<span class="number">0</span>].<span class="built_in">end</span>(), cmp);</span><br><span class="line">        <span class="keyword">return</span> trans(M[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>一个优化的算法就是，这里用一个10长度的数组记录就可以了，每个索引的地方记录对应的数的个数，花费时间O(n)。空间上O(1)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">trans</span> <span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; V)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (V.<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (V[<span class="number">0</span>] == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">        <span class="built_in">string</span> res = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> v : V) res += <span class="keyword">char</span>(<span class="number">48</span> + v);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">largestMultipleOfThree</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; digits)</span> </span>&#123;</span><br><span class="line">        vector&lt;int&gt; V(10, 0), M(3, 0);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d: digits) &#123;</span><br><span class="line">            V[d]++;</span><br><span class="line">            M[d % <span class="number">3</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> m = <span class="built_in">min</span>(M[<span class="number">1</span>],M[<span class="number">2</span>]), del1, del2;</span><br><span class="line">        <span class="comment">// 去掉多余的数</span></span><br><span class="line">        <span class="keyword">if</span> (m*<span class="number">2</span> &gt;= M[<span class="number">1</span>]/<span class="number">3</span>*<span class="number">3</span>+M[<span class="number">2</span>]/<span class="number">3</span>*<span class="number">3</span>+<span class="built_in">min</span>(M[<span class="number">1</span>]-M[<span class="number">1</span>]/<span class="number">3</span>*<span class="number">3</span>, M[<span class="number">2</span>]-M[<span class="number">2</span>]/<span class="number">3</span>*<span class="number">3</span>)*<span class="number">2</span>) &#123;</span><br><span class="line">            del1 = M[<span class="number">1</span>] - m;</span><br><span class="line">            del2 = M[<span class="number">2</span>] - m;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            del1 = M[<span class="number">1</span>] % <span class="number">3</span> - <span class="built_in">min</span>(M[<span class="number">1</span>]-M[<span class="number">1</span>]/<span class="number">3</span>*<span class="number">3</span>, M[<span class="number">2</span>]-M[<span class="number">2</span>]/<span class="number">3</span>*<span class="number">3</span>);</span><br><span class="line">            del2 = M[<span class="number">2</span>] % <span class="number">3</span> - <span class="built_in">min</span>(M[<span class="number">1</span>]-M[<span class="number">1</span>]/<span class="number">3</span>*<span class="number">3</span>, M[<span class="number">2</span>]-M[<span class="number">2</span>]/<span class="number">3</span>*<span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;del1 &lt;&lt; del2&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;<span class="number">9</span>; i+=<span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (del1 &gt; V[i]) &#123;</span><br><span class="line">                del1 -= V[i];</span><br><span class="line">                V[i] = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                V[i] -= del1;</span><br><span class="line">                del1 = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;<span class="number">9</span>; i+=<span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (del2 &gt; V[i]) &#123;</span><br><span class="line">                del2 -= V[i];</span><br><span class="line">                V[i] = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                V[i] -= del2;</span><br><span class="line">                del2 = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">                    </span><br><span class="line">        <span class="built_in">string</span> res = <span class="string">""</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">9</span>; i&gt;=<span class="number">0</span>; i--) res += <span class="built_in">string</span>(V[i], <span class="number">48</span>+i);</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="built_in">size</span>() &gt; <span class="number">0</span> <span class="keyword">and</span> res[<span class="number">0</span>] == <span class="string">'0'</span>) res = <span class="string">"0"</span>; </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-23</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/21/LeetCode(1353.%20Maximum%20Number%20of%20Events%20That%20Can%20Be%20Attended)%E5%91%A8%E8%B5%9B3%E9%A2%98%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/21/LeetCode(1353.%20Maximum%20Number%20of%20Events%20That%20Can%20Be%20Attended)%E5%91%A8%E8%B5%9B3%E9%A2%98%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1353. Maximum Number of Events That Can Be Attended)周赛3题题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-21 18:21:10 / 修改时间：19:41:57" itemprop="dateCreated datePublished" datetime="2020-02-21T18:21:10+08:00">2020-02-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1353-Maximum-Number-of-Events-That-Can-Be-Attended-周赛3题题解"><a href="#LeetCode-1353-Maximum-Number-of-Events-That-Can-Be-Attended-周赛3题题解" class="headerlink" title="LeetCode(\1353. Maximum Number of Events That Can Be Attended)周赛3题题解"></a>LeetCode(\1353. Maximum Number of Events That Can Be Attended)周赛3题题解</h1><p>Given an array of <code>events</code> where <code>events[i] = [startDayi, endDayi]</code>. Every event <code>i</code> starts at <code>startDayi</code> and ends at <code>endDayi</code>.</p>
<p>You can attend an event <code>i</code> at any day <code>d</code> where <code>startTimei &lt;= d &lt;= endTimei</code>. Notice that you can only attend one event at any time <code>d</code>.</p>
<p>Return <em>the maximum number of events</em> you can attend.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/02/05/e1.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,2],[2,3],[3,4]]</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: You can attend all the three events.</span><br><span class="line">One way to attend them all is as shown.</span><br><span class="line">Attend the first event on day 1.</span><br><span class="line">Attend the second event on day 2.</span><br><span class="line">Attend the third event on day 3.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events&#x3D; [[1,2],[2,3],[3,4],[1,2]]</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,4],[4,4],[2,2],[3,4],[1,1]]</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,100000]]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>

<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: events &#x3D; [[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7]]</span><br><span class="line">Output: 7</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= events.length &lt;= 10^5</code></li>
<li><code>events[i].length == 2</code></li>
<li><code>1 &lt;= events[i][0] &lt;= events[i][1] &lt;= 10^5</code></li>
</ul>
<h2 id="解法一-Greedy"><a href="#解法一-Greedy" class="headerlink" title="解法一 Greedy"></a>解法一 Greedy</h2><p>Medium</p>
<p>给一个事件数组，每个事件有两个元素start和end，表示开始和结束时间，可能是很多天，也可能就一天。我们可以在一个事件的运行期间参与这个事件，但是我们在一天只能参与一个事件，而多个事件的运行时间可能重叠。返回可以参加的最大的事件数。</p>
<p>我们可以使用Greedy来做这个题，采用这样一个贪心策略：我们参加一个事件，尽可能早。将所有事件排序后，我们从头到尾遍历事件，对每一个事件，都尽可能早地去参加，这样就能给后面的尽可能留多的时间。这是可以证明任何最优方案可以转化为按照这个策略所得到的结果。</p>
<p>具体算法如下。</p>
<p>将事件按照结束时间排序。使用一个集合S记录选中的事件，初始化事件为空。</p>
<p>然后从头到尾遍历事件，遍历到一个事件e，如果e的开始时间不在集合里面，就将这个开始时间放入集合。</p>
<p>如果在里面的话，就从左到右遍历这个事件的天数，只要发现不在集合内的，就加入集合。</p>
<p>然后结束遍历。返回集合的大小即可。</p>
<h3 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，N个事件，排序花费O(nlogn)，遍历的时间复杂度就是N个事件的天数之和。空间上，set最多存储N个值，为O(n)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">bool cmp(vector&lt;int&gt; a, vector&lt;int&gt; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a[<span class="number">1</span>] &lt; b[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int maxEvents(vector&lt;vector&lt;int&gt;&gt;&amp; events) &#123;</span><br><span class="line">        set&lt;int&gt; S;</span><br><span class="line">        sort(events.begin(), events.end(), cmp);</span><br><span class="line">        <span class="keyword">for</span> (vector&lt;int&gt; event : events) &#123;</span><br><span class="line">            <span class="keyword">if</span> (S.find(event[<span class="number">0</span>]) == S.end()) S.insert(event[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (int i=event[<span class="number">0</span>]+<span class="number">1</span>; i&lt;=event[<span class="number">1</span>]; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (S.find(i) == S.end()) &#123;</span><br><span class="line">                        S.insert(i);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> S.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="解法二-优先队列"><a href="#解法二-优先队列" class="headerlink" title="解法二 优先队列"></a>解法二 优先队列</h2><p>还有一种使用优先队列的的方式。</p>
<p>因为最多有100000天可以参加活动，我们从第一天开始往后看，每一天都加入当前开始的事件到队列里面去。然后从队列里面删除掉在当天已经结束的所有事件。这样，队列里面就都是可以参加的活动。然后在这些事件里，我们参加最早结束的事件，从队列删除队列首部就可以了。即采用了贪婪策略，每天参加可以参加的事件中最早结束的。</p>
<p>算法如下</p>
<p>构造一个优先队列pQ来存储事件的结束时间，使用小顶堆实现，表明每次出队列的是结束早的事件。</p>
<p>对事件数组按照开始时间排序。然后根据题意，事件的运行时间最多为10000天。从第一天开始遍历（主循环）。同时从事件数组头也开始遍历，记录位置。</p>
<p>当优先队列pQ不为空并且队首的元素比当前天数小时，即当前天数超过了事件的结束时间，不在对应事件的活动时间内。从队列内弹出队首元素。</p>
<p>从事件数组记录的位置开始向后遍历，如果当前事件的开始时间等于当前天数，就将当前事件的结束时间压入优先队列pQ。只要遇到当前事件的开始时间不等于当前天数。</p>
<p>查看pQ是否有元素，如果有元素，则表明当前天数下，可以参加事件，res+1。然后重复上述步骤，遍历下一天，最后返回结果res。</p>
<h3 id="时空复杂度-1"><a href="#时空复杂度-1" class="headerlink" title="时空复杂度"></a>时空复杂度</h3><p>代码如下，时间上，排序和队列的操作均为$O(nlogn)$，空间上为$O(n)$。</p>
<p><code>Runtime: **328 ms**</code></p>
<p><code>Memory Usage: **45.6 MB**</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxEvents</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; events)</span> </span>&#123;</span><br><span class="line">        priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; pQ; <span class="comment">// 小顶堆的优先队列</span></span><br><span class="line">        sort(events.<span class="built_in">begin</span>(), events.<span class="built_in">end</span>()); <span class="comment">// 默认使用第二维数组中第一个元素升序排列，这里就是按事件的开始时间升序</span></span><br><span class="line">        <span class="keyword">int</span> e = <span class="number">0</span>, len = events.<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d=<span class="number">1</span>; d&lt;=<span class="number">100000</span>; d++) &#123;</span><br><span class="line">            <span class="comment">// 丢掉过期的事件</span></span><br><span class="line">            <span class="keyword">while</span> (pQ.empty()==<span class="literal">false</span> <span class="keyword">and</span> pQ.top() &lt; d) pQ.pop();</span><br><span class="line">            <span class="comment">// 存入今天刚开始的事件的结束时间</span></span><br><span class="line">            <span class="keyword">while</span> (e &lt; len <span class="keyword">and</span> events[e][<span class="number">0</span>] == d) pQ.push(events[e++][<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// 从队列里找出最早结束的事件参加</span></span><br><span class="line">            <span class="keyword">if</span> (pQ.empty() == <span class="literal">false</span>) &#123;</span><br><span class="line">                pQ.pop();</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>优化一下，跳过那些一个事件都不存在的天数。</p>
<p><code>Runtime: **272 ms**</code></p>
<p><code>Memory Usage: **45.6 MB**</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxEvents</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; events)</span> </span>&#123;</span><br><span class="line">        priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; pQ; <span class="comment">// 小顶堆的优先队列</span></span><br><span class="line">        sort(events.<span class="built_in">begin</span>(), events.<span class="built_in">end</span>()); <span class="comment">// 默认使用第二维数组中第一个元素升序排列，这里就是按事件的开始时间升序</span></span><br><span class="line">        <span class="keyword">int</span> d = <span class="number">0</span>, e = <span class="number">0</span>, len = events.<span class="built_in">size</span>(), res = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//cout&lt;&lt;"star"&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">while</span> (pQ.empty()==<span class="literal">false</span> <span class="keyword">or</span> e&lt;len) &#123;</span><br><span class="line">            <span class="comment">// 当前天数不存在任何事件时，更新到当前事件的开始时间</span></span><br><span class="line">            <span class="keyword">if</span> (pQ.empty()) d = events[e][<span class="number">0</span>];</span><br><span class="line">            <span class="comment">// 存入今天刚开始的事件的结束时间</span></span><br><span class="line">            <span class="keyword">while</span> (e &lt; len <span class="keyword">and</span> events[e][<span class="number">0</span>] &lt;= d) pQ.push(events[e++][<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// 从队列里找出最早结束的事件参加</span></span><br><span class="line">            pQ.pop();</span><br><span class="line">            res++;</span><br><span class="line">            d++;</span><br><span class="line">            <span class="comment">// 丢掉过期的事件</span></span><br><span class="line">            <span class="keyword">while</span> (pQ.empty()==<span class="literal">false</span> <span class="keyword">and</span> pQ.top() &lt; d) pQ.pop();  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-21. 这题没想出来，是参考的别人的做法学的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/21/LeetCode(1354.%20Construct%20Target%20Array%20With%20Multiple%20Sums)%E5%91%A8%E8%B5%9B4%E9%A2%98%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/21/LeetCode(1354.%20Construct%20Target%20Array%20With%20Multiple%20Sums)%E5%91%A8%E8%B5%9B4%E9%A2%98%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1354. Construct Target Array With Multiple Sums)周赛4题题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-21 17:10:54 / 修改时间：18:13:28" itemprop="dateCreated datePublished" datetime="2020-02-21T17:10:54+08:00">2020-02-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-1354-Construct-Target-Array-With-Multiple-Sums-周赛4题题解"><a href="#LeetCode-1354-Construct-Target-Array-With-Multiple-Sums-周赛4题题解" class="headerlink" title="LeetCode(\1354. Construct Target Array With Multiple Sums)周赛4题题解"></a>LeetCode(\1354. Construct Target Array With Multiple Sums)周赛4题题解</h1><p>Given an array of integers <code>target</code>. From a starting array, <code>A</code> consisting of all 1’s, you may perform the following procedure :</p>
<ul>
<li>let <code>x</code> be the sum of all elements currently in your array.</li>
<li>choose index <code>i</code>, such that <code>0 &lt;= i &lt; target.size</code> and set the value of <code>A</code> at index <code>i</code> to <code>x</code>.</li>
<li>You may repeat this procedure as many times as needed.</li>
</ul>
<p>Return True if it is possible to construct the <code>target</code> array from <code>A</code> otherwise return False.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: target &#x3D; [9,3,5]</span><br><span class="line">Output: true</span><br><span class="line">Explanation: Start with [1, 1, 1] </span><br><span class="line">[1, 1, 1], sum &#x3D; 3 choose index 1</span><br><span class="line">[1, 3, 1], sum &#x3D; 5 choose index 2</span><br><span class="line">[1, 3, 5], sum &#x3D; 9 choose index 0</span><br><span class="line">[9, 3, 5] Done</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: target &#x3D; [1,1,1,2]</span><br><span class="line">Output: false</span><br><span class="line">Explanation: Impossible to create target array from [1,1,1,1].</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: target &#x3D; [8,5]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>N == target.length</code></li>
<li><code>1 &lt;= target.length &lt;= 5 * 10^4</code></li>
<li><code>1 &lt;= target[i] &lt;= 10^9</code></li>
</ul>
<p><a href="https://leetcode.com/problems/construct-target-array-with-multiple-sums/discuss" target="_blank" rel="noopener">Discuss</a></p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>给出一个全部整数数组A，然后判断其是否可以由全部为1的等长数组变换而来。变换方式为：1、计算数组（初始化全部为1）的和，2、用和替换掉数组内的一个元素。重复12步骤可以若干次。如果最后能变成A数组，就返回True，否则为False。</p>
<p>这个题可以使用最大堆解决。其实理论上来说回溯法也可以，但是数组A中的有很大的数，会导致回溯深度超过内存限制。因此这里使用最大堆。当然也可以使用优先队列，构建值大的优先级高的队列。</p>
<p>我们将整数的元素构建最大堆，然后可以知道的是，这个数组中的最大元素一定是由剩下的元素加上最大值位置上原来的数字组成的。我们可以把当前的数组看成一个状态，那么上一个状态的数组如何构建呢？这里我们只需要最大值位置上的上一个状态的元素计算出来填进去就可以了。那么这个怎么计算呢？</p>
<p>假设当前状态下，数组的和为S，数组中最大值为M。那么上一个状态的数组的和就为M，所以上一个状态被替换掉的数为M-(S-M)=2M-S。分析题可以知道，数组元素的顺序其实是没有什么关系的，因此我们将最大堆的顶部最大元素去掉，然后插入2M-S，然后更新堆。如何判断是否合法呢，只要最后可以保证最大堆中顶部元素为1，这就保证所有的元素都小于等于1，并且2M-S进入堆时不会为负数或0，同时不能为M，即可以保证所有元素都大于等于1并且不会状态重复，即最后保证所有元素都为1。满足条件就返回True，否则就为False。</p>
<p>PS：这里直接使用2M-S会LTE，怎么优化呢，可以观察，每次都是最大的元素作为上一个状态的数组和，而如果最大元素和其余元素之和相差很大，那么一步一步加减会很慢，这里我们可以使用mod操作，使用求余数，就跟计算最大公约数一样。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间复杂度(OlogS)，S为A数组的和。空间上，堆O(n)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPossible</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>, len = target.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t : target) sum += t;</span><br><span class="line">        <span class="comment">// 建立大顶堆</span></span><br><span class="line">        make_heap(target.<span class="built_in">begin</span>(), target.<span class="built_in">end</span>(), less&lt;<span class="keyword">int</span>&gt;());</span><br><span class="line">        <span class="comment">// 遍历堆元素</span></span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="keyword">while</span> (target[<span class="number">0</span>] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            pop_heap(target.<span class="built_in">begin</span>(), target.<span class="built_in">end</span>(), less&lt;<span class="keyword">int</span>&gt;()); <span class="comment">// 弹出堆顶元素</span></span><br><span class="line">            <span class="keyword">if</span> (sum - target[len<span class="number">-1</span>] &lt;= <span class="number">1</span>) <span class="keyword">return</span> sum - target[len<span class="number">-1</span>]  == <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (target[len<span class="number">-1</span>] &lt;= (sum - target[len<span class="number">-1</span>])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            tmp = target[len<span class="number">-1</span>] % (sum - target[len<span class="number">-1</span>]);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (tmp == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">            sum = sum - target[len<span class="number">-1</span>] + tmp;</span><br><span class="line">            target[len<span class="number">-1</span>] = tmp;</span><br><span class="line">            make_heap(target.<span class="built_in">begin</span>(), target.<span class="built_in">end</span>(), less&lt;<span class="keyword">int</span>&gt;()); <span class="comment">// 重整堆</span></span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2020-02-21</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/LeetCode(1326.%20Minimum%20Number%20of%20Taps%20to%20Open%20to%20Water%20a%20Garden)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/LeetCode(1326.%20Minimum%20Number%20of%20Taps%20to%20Open%20to%20Water%20a%20Garden)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(1326. Minimum Number of Taps to Open to Water a Garden)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-18 18:10:09" itemprop="dateCreated datePublished" datetime="2020-02-18T18:10:09+08:00">2020-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="LeetCode-1326-Minimum-Number-of-Taps-to-Open-to-Water-a-Garden-题解"><a href="#LeetCode-1326-Minimum-Number-of-Taps-to-Open-to-Water-a-Garden-题解" class="headerlink" title="LeetCode(\1326. Minimum Number of Taps to Open to Water a Garden)题解"></a>LeetCode(\1326. Minimum Number of Taps to Open to Water a Garden)题解</h2><p>There is a one-dimensional garden on the x-axis. The garden starts at the point <code>0</code> and ends at the point <code>n</code>. (i.e The length of the garden is <code>n</code>).</p>
<p>There are <code>n + 1</code> taps located at points <code>[0, 1, ..., n]</code> in the garden.</p>
<p>Given an integer <code>n</code> and an integer array <code>ranges</code> of length <code>n + 1</code> where <code>ranges[i]</code> (0-indexed) means the <code>i-th</code> tap can water the area <code>[i - ranges[i], i + ranges[i]]</code> if it was open.</p>
<p>Return <em>the minimum number of taps</em> that should be open to water the whole garden, If the garden cannot be watered return <strong>-1</strong>.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/01/16/1685_example_1.png" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 5, ranges &#x3D; [3,4,1,1,0,0]</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: The tap at point 0 can cover the interval [-3,3]</span><br><span class="line">The tap at point 1 can cover the interval [-3,5]</span><br><span class="line">The tap at point 2 can cover the interval [1,3]</span><br><span class="line">The tap at point 3 can cover the interval [2,4]</span><br><span class="line">The tap at point 4 can cover the interval [4,4]</span><br><span class="line">The tap at point 5 can cover the interval [5,5]</span><br><span class="line">Opening Only the second tap will water the whole garden [0,5]</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 3, ranges &#x3D; [0,0,0,0]</span><br><span class="line">Output: -1</span><br><span class="line">Explanation: Even if you activate all the four taps you cannot water the whole garden.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 7, ranges &#x3D; [1,2,1,0,2,1,0,1]</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>

<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 8, ranges &#x3D; [4,0,0,0,0,0,0,0,4]</span><br><span class="line">Output: 2</span><br></pre></td></tr></table></figure>

<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n &#x3D; 8, ranges &#x3D; [4,0,0,0,4,0,0,0,4]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= n &lt;= 10^4</code></li>
<li><code>ranges.length == n + 1</code></li>
<li><code>0 &lt;= ranges[i] &lt;= 100</code></li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard</p>
<p>在一维数组上有一个花园，有n+1个水龙头，分别位于0，1，2，···，n。给定一个n+1的数组ranges，第i个水龙头的位置为i，喷水的面积为(i-ranges[i], i+ranges[i]). 现在问最少需要打开多少水龙头，可以覆盖整个花园？返回最少需要的水龙头数，如果不能覆盖就返回-1。</p>
<p>这个题使用Greedy的办法，也许有DP的更普适性的解决办法，但是我没想到。</p>
<p>Greedy思路如下，我们每次选都尽可能选覆盖范围广的。首先根据ranges将每个水龙头的喷水区间算出来。然后根据其右边界进行降序排序。记住喷水区间右边最大为花园的边界，即所有右边界为min(n, right-val)，同理，左边界最小为花园的左边界，max(0, left-val)。</p>
<p>然后我们遍历每个水龙头的边界，初始化左右边界为最右边水龙头的边界，res=1，然后从第二个水龙头开始。每次选择一个向左延伸最远同时又和当前区间有交集的水龙头，选定了之后res++，这里要注意特殊情况，假如所有右边界都一样，然后直接就到达花园左边界（比如所有水龙头的右边界都是花园右边界，其中若干个水龙头的左边界是花园左边界，那么其实只需要1个即可，res=1），那么我们选定的区间是可以全部覆盖上一个，这时候不执行res++。因此我们设定tl和tr暂时定义左右区间。然后判断是否更新。</p>
<h2 id="时空复杂度"><a href="#时空复杂度" class="headerlink" title="时空复杂度"></a>时空复杂度</h2><p>代码如下，时间上，整理边界 $O(n)$ ，排序$O(nlogn)$，遍历$O(n)$，整体$O(nlogn)$。空间上，存储边界$O(n)$。</p>
<p><code>Runtime: 396 ms, faster than 6.88% of C++ online submissions for Minimum Number of Taps to Open to Water a Garden.</code></p>
<p><code>Memory Usage: 99.4 MB, less than 100.00% of C++ online submissions for Minimum Number of Taps to Open to Water a Garden.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a[<span class="number">1</span>] &gt; b[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minTaps</span><span class="params">(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; ranges)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">V</span><span class="params">(n+<span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">2</span>))</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) &#123;</span><br><span class="line">            V[i][<span class="number">0</span>] = <span class="built_in">max</span>(<span class="number">0</span>, i - ranges[i]);</span><br><span class="line">            V[i][<span class="number">1</span>] = <span class="built_in">min</span>(n, i + ranges[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        sort(V.<span class="built_in">begin</span>(), V.<span class="built_in">end</span>(), cmp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">1</span>, l = V[<span class="number">0</span>][<span class="number">0</span>], r = V[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        </span><br><span class="line">            <span class="comment">// 找到左边界离0最近的一个坐标，更新l和r</span></span><br><span class="line">            <span class="keyword">int</span> k, tl = INT_MAX, tr;</span><br><span class="line">            <span class="keyword">for</span> (k=i; k&lt;=n; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (V[k][<span class="number">1</span>] &lt; l) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tl == INT_MAX) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (V[k][<span class="number">1</span>] == r <span class="keyword">and</span> V[k][<span class="number">0</span>] &lt;= l) l = V[k][<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (V[k][<span class="number">0</span>] &lt; l <span class="keyword">and</span> V[k][<span class="number">0</span>] &lt; tl) &#123;</span><br><span class="line">                    tl = V[k][<span class="number">0</span>];</span><br><span class="line">                    tr = V[k][<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            i = k - <span class="number">1</span>;</span><br><span class="line">            l = tl;</span><br><span class="line">            r = tr;</span><br><span class="line">            <span class="keyword">if</span> (tl != INT_MAX) res++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave， 2020-02-18。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/Mac%E4%B8%8B%E5%A4%A9%E6%B1%A0%E6%96%B0%E4%BA%BA%E8%B5%9B%E9%80%9A%E8%BF%87%E5%85%A8%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/Mac%E4%B8%8B%E5%A4%A9%E6%B1%A0%E6%96%B0%E4%BA%BA%E8%B5%9B%E9%80%9A%E8%BF%87%E5%85%A8%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Mac下天池新人赛通过全流程详解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-02-18 14:05:19 / 修改时间：14:05:22" itemprop="dateCreated datePublished" datetime="2020-02-18T14:05:19+08:00">2020-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mac下天池新人赛通过全流程详解"><a href="#Mac下天池新人赛通过全流程详解" class="headerlink" title="Mac下天池新人赛通过全流程详解"></a>Mac下天池新人赛通过全流程详解</h1><h2 id="一、安装docker环境"><a href="#一、安装docker环境" class="headerlink" title="一、安装docker环境"></a>一、安装docker环境</h2><p>在mac下安装docker，直接下载软件安装即可。</p>
<p>链接：<a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener">https://docs.docker.com/docker-for-mac/install/</a></p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBebf4e52305359827d736ad6e5c215f20?method=getImage&version=32&cstk=7hthgWHw" alt="image-20200218090852375"></p>
<h2 id="二、开通阿里云镜像服务"><a href="#二、开通阿里云镜像服务" class="headerlink" title="二、开通阿里云镜像服务"></a>二、开通阿里云镜像服务</h2><p>这里按照“手把手教程”（在新人赛的链接内）内的流程一步步操作即可，非常的详细和简单。</p>
<p>链接如下：<a href="https://tianchi.aliyun.com/competition/entrance/231759/tab/174" target="_blank" rel="noopener">https://tianchi.aliyun.com/competition/entrance/231759/tab/174</a></p>
<h2 id="三、构建镜像"><a href="#三、构建镜像" class="headerlink" title="三、构建镜像"></a>三、构建镜像</h2><p>这里就是构建自己的镜像，其实docker的各部分关系如图所示。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBd869d338687854f93ada5ae25612415e?method=getImage&version=24&cstk=7hthgWHw" alt="image-20200218091244075"></p>
<h3 id="建立文件"><a href="#建立文件" class="headerlink" title="建立文件"></a>建立文件</h3><p>这里我们选择使用Dockerfile的方式构建镜像，步骤如下：</p>
<ol>
<li><p>建立一个文件夹如tianchi-test，用来存储本次项目的所有文件。</p>
</li>
<li><p>在文件夹内建立四个文件，Dockerfile、hello_world.py、result.json、run.sh</p>
</li>
</ol>
<p>至此，文件就建立完成了，这个项目基本完成了一半，剩下的就是填充各个文件。</p>
<p><strong>Dockerfile</strong> 用来指定如何构建一个镜像，在其中填入如下内容。</p>
<pre><code># Base Images
## 从天池基础镜像构建
FROM registry.cn-shanghai.aliyuncs.com/tcc-public/python:3
## 把当前文件夹里的文件构建到镜像的根目录下
ADD . /
## 指定默认工作目录为根目录（需要把run.sh和生成的结果文件都放在该文件夹下，提交后才能运行
WORKDIR /
## 镜像启动后统一执行 sh run.sh
CMD [&quot;sh&quot;, &quot;run.sh&quot;]</code></pre><p><strong>hello_world.py</strong> 项目的主体文件，完成三个题目的代码在这里面构建。</p>
<pre><code>import sys
import json
res = {}

res[&apos;Q1&apos;] = &quot;Hello world&quot;
#print(&quot;Q1-pycharm&quot;, res[&apos;Q1&apos;])
tmp = 0

with open(&quot;./tcdata/num_list.csv&quot; , &apos;r&apos;) as f:
   data = f.readlines()

num_list = [int(x.strip()) for x in data]
res_sum = sum(num_list)

#print(&quot;Q2-pycharm&quot;, res_sum)

res[&apos;Q2&apos;] = res_sum # np.sum(res_sum)
res[&apos;Q3&apos;] = sorted(num_list,reverse=True)[:10]
with open(&apos;result.json&apos;, &apos;w&apos;, encoding=&apos;utf-8&apos;) as f:
   f.write(json.dumps(res, ensure_ascii=False))

#print(&quot;Q3-pycharm&quot;, res[&apos;Q3&apos;])</code></pre><p><strong>result.json</strong> 用来存储结果，不用填充内容</p>
<p><strong>run.sh</strong> 就一句话，用来编译hello_world.py</p>
<pre><code>python hello_world.py</code></pre><p>这里大家注意到了，我们并没有num_list.csv。“/tcdata/num_list.csv”这个系统会自动创建，我们可以不做操作，只是读取的时候设置一下就行，只需要在hello_world.py代码里写明读取就可以了。</p>
<p>同时，我们的项目主体文件hello_world.py也不一定要叫这个名字，只要和run.sh内的保持一致就可以了。</p>
<h3 id="build镜像"><a href="#build镜像" class="headerlink" title="build镜像"></a>build镜像</h3><p>首先从远端下载一个基础镜像，这个基础镜像在上述的Dockerfile中有使用到。</p>
<pre><code>docker pull registry.cn-shanghai.aliyuncs.com/tcc-public/python:3</code></pre><p>然后在tianchi-test目录下使用如下命令构建自己的镜像。</p>
<pre><code>docker build -t registry.cn-shanghai.aliyuncs.com/账户名/仓库名:版本号 .</code></pre><p>注意最后有个逗号.<br><img src="https://note.youdao.com/yws/api/personal/file/WEBa4d8498b6252bc6a7b2f9860c1960237?method=getImage&version=19&cstk=7hthgWHw" alt="image-20200218100328898"></p>
<h2 id="四、推送镜像到阿里云ACR"><a href="#四、推送镜像到阿里云ACR" class="headerlink" title="四、推送镜像到阿里云ACR"></a>四、推送镜像到阿里云ACR</h2><p>推送镜像有两种方式。</p>
<ol>
<li><p><strong>服务器命令行提交</strong>（在自己建立的仓库的基本信息目录内有相关提交代码，直接复制即可）</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB28d4d9e0df4ceb51aff3b9b87f43505d?method=getImage&version=18&cstk=7hthgWHw" alt="image-20200218095053531"></p>
</li>
<li><p><strong>使用Pycharm+ <a href="https://cn.aliyun.com/product/cloudtoolkit" target="_blank" rel="noopener">Alibaba Cloud Toolkit</a>提交。</strong></p>
<ul>
<li><p>a、配置账户信息，获取AccessKey：<a href="https://help.aliyun.com/document_detail/145787.html?spm=a2c4g.11186623.2.22.702c1d4eQUpZ4M#task-2349932" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/145787.html?spm=a2c4g.11186623.2.22.702c1d4eQUpZ4M#task-2349932</a>. 得到AccessKey ID 和 AccessKey Secret。</p>
</li>
<li><p>b、pycharm安装Alibaba Cloud Toolkit</p>
<p>“command + ,”打开设置界面。或者：</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB586228ee61dbd7bd2eb1e28dc748b10e?method=getImage&version=27&cstk=7hthgWHw" alt="image-20200218112749131"></p>
<p>然后搜索插件。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBcb872189bab1efa1c0197f5853c8291b?method=getImage&version=11&cstk=7hthgWHw" alt="image-20200218113114083"></p>
<p>安装完成之后界面如下。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB787563c68ed97cb06b834715f9a3b732?method=getImage&version=17&cstk=7hthgWHw" alt="image-20200218113212619"></p>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>c、在pycharm中设置用于打包本地镜像的 Docker 环境。<br>进入设置界面，打开之后，Mac勾选 <strong>Unix Socket</strong>，然后单击 <strong>Browse</strong>，输入<code>unix:///var/run/docker.sock</code>。。<strong>注意：如果出现连接测试报错，可进入 Docker 的 Settings 界面，单击左侧导航栏中的 General，然后选择 Expose daemon on tcp://localhost:2375 without TLS。</strong><br><img src="https://note.youdao.com/yws/api/personal/file/WEB495006b6b8e589b38122b921c6b9cb3b?method=getImage&version=25&cstk=7hthgWHw" alt="image-20200218113507511"><br>在下图中填入第一遍得到的ID和密码。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBbd1d80a7e1a1467e6f3df42af15652a2?method=getImage&version=20&cstk=7hthgWHw" alt="image-20200218112851387"></p>
<ul>
<li>d、推送仓库到ACR<br>在pycharm上，打开项目文件tianchi-test。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5ade6e0b87a50ab47007c00044fcff8a?method=getImage&version=16&cstk=7hthgWHw" alt="image-20200218114230636"><br>右键单击应用工程，如下操作。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9634749a8726af0be5231797a6b7cc4e?method=getImage&version=31&cstk=7hthgWHw" alt="image-20200218114415051"><br>得到如下界面，然后填入项目目录等，点击Run开始推送。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5ce6fc3f4cf613c545b98ca06651b049?method=getImage&version=10&cstk=7hthgWHw" alt="image-20200218115103857"><br>运行成功如下图所示，此时远端就显示你成功推送了。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBad1c5fc0cc0c6570cad1b9bf6af6f3bf?method=getImage&version=28&cstk=7hthgWHw" alt="image-20200218115926611"><br><img src="https://note.youdao.com/yws/api/personal/file/WEB0cf5a6ea065ea36d65a1fc73773cb598?method=getImage&version=14&cstk=7hthgWHw" alt="image-20200218120059574"></li>
</ul>
</li>
</ul>
<h2 id="五、验证实验结果"><a href="#五、验证实验结果" class="headerlink" title="五、验证实验结果"></a>五、验证实验结果</h2><p>推送完成之后，就在比赛页面输入仓库链接和账户信息即可提交结果了。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB269bb755c32d8fbaab2bbb1b7d79e350?method=getImage&version=29&cstk=7hthgWHw" alt="image-20200218120358998"></p>
<p>提交之后，在成绩页面即可查看。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB47ffdb203ec46a95e45db6755cff9f51?method=getImage&version=23&cstk=7hthgWHw" alt="image-20200218120435389"></p>
<h2 id="六、本地调试"><a href="#六、本地调试" class="headerlink" title="六、本地调试"></a>六、本地调试</h2><p>一般来说，代码写完之后，需要进行调试，一种方法是我们先构建项目主体代码hello_world.py，然后自己建立一个csv文件进行调试，最后一切都OK了再建立镜像。但是我们也可以建立镜像之后，运行起来进入容器调试，这里我们如何进入镜像调试呢？</p>
<p>直接在容器内运行项目，XX为镜像的ID，通过docker images可以查看，这里不需要把ID全部写出来，只需要前几个字母，只要可以将其余其它ID区分开就可以了。</p>
<pre><code>docker run -it XX</code></pre><p><img src="https://note.youdao.com/yws/api/personal/file/WEBbacebd5dc491bd3d6c78762b4d1eef19?method=getImage&version=21&cstk=7hthgWHw" alt="image-20200218121516536"></p>
<p>或者按照如下激活镜像，进入容器。</p>
<pre><code>docker run -it XXX /bin/bash 
#XXX为镜像名称，同样只需要前几个字母数字，只要能区分开来即可，进入终端。</code></pre><p><img src="https://note.youdao.com/yws/api/personal/file/WEB81a59b9266604d305ba15e59191d7eb9?method=getImage&version=22&cstk=7hthgWHw" alt="image-20200218121740938"></p>
<p>或者镜像已经运行成容器了，可以在命令行输入如下代码，进入容器。</p>
<pre><code>docker exec –it XXXXXXXXXX bash 
# 进入正在运行的容器内，XXXXXXXXXX是镜像ID 
# 进入容器后，就可以修改镜像了，进去之后就是正常的操作，比如pip3之类的</code></pre><p>然后修改完成之后</p>
<pre><code>$ docker commit XXX [镜像ID] [保存成的镜像名字]:1.0 [版本] 
# 提交你刚才修改的镜像，新的镜像名称为wujiekd，版本为1.0</code></pre><p>在里面调试完之后输入exit即可退出。</p>
<p>BitBrave，2020-02-18.</p>
<p>​      </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="XJ"
      src="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
  <p class="site-author-name" itemprop="name">XJ</p>
  <div class="site-description" itemprop="description">幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">309</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BitBrave, IIE</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
