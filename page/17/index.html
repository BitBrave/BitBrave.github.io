<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
<meta property="og:type" content="website">
<meta property="og:title" content="BitBrave">
<meta property="og:url" content="http://yoursite.com/page/17/index.html">
<meta property="og:site_name" content="BitBrave">
<meta property="og:description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="XJ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>BitBrave</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7e6d55cf2fa14e729703953237f65413";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">BitBrave</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">IIE</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(28.%20Implement%20strStr())%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(28.%20Implement%20strStr())%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(28. Implement strStr())题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-28-Implement-strStr-题解"><a href="#LeetCode-28-Implement-strStr-题解" class="headerlink" title="LeetCode(28. Implement strStr())题解"></a>LeetCode(28. Implement strStr())题解</h1><hr>
<p>原文如下：<br>Implement strStr().</p>
<p>Return the index of the first occurrence of needle in haystack, or -1 if needle is not part of haystack.</p>
<p>Example 1:</p>
<pre><code>Input: haystack = &quot;hello&quot;, needle = &quot;ll&quot;
Output: 2</code></pre><p>Example 2:</p>
<pre><code>Input: haystack = &quot;aaaaa&quot;, needle = &quot;bba&quot;
Output: -1</code></pre><p>Clarification:</p>
<p>What should we return when needle is an empty string? This is a great question to ask during an interview.</p>
<p>For the purpose of this problem, we will return 0 when needle is an empty string. This is consistent to C’s strstr() and Java’s indexOf().</p>
<h2 id="题意思路"><a href="#题意思路" class="headerlink" title="题意思路"></a>题意思路</h2><p>Easy题。第一次想得有点多，还是老思路，不应该自己造轮子。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="keyword">int</span> sta, <span class="built_in">string</span> h, <span class="keyword">int</span> hl, <span class="built_in">string</span> n, <span class="keyword">int</span> nl)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(sta&lt;hl &amp;&amp; j&lt;nl &amp;&amp; h[sta++]==n[j++]);</span><br><span class="line">        <span class="keyword">return</span> j==nl &amp;&amp; h[sta<span class="number">-1</span>]==n[j<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strStr</span><span class="params">(<span class="built_in">string</span> haystack, <span class="built_in">string</span> needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> hl = haystack.<span class="built_in">size</span>(), nl = needle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=hl-nl; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isMatch(i, haystack, hl, needle, nl)) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>其实有个更简单方式，利用string的substr。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strStr</span><span class="params">(<span class="built_in">string</span> haystack, <span class="built_in">string</span> needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> hl = haystack.<span class="built_in">size</span>(), nl = needle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=hl-nl; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(haystack.substr(i, nl)==needle) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-04-24。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(29.%20Divide%20Two%20Integers)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(29.%20Divide%20Two%20Integers)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(29. Divide Two Integers)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-29-Divide-Two-Integers-题解"><a href="#LeetCode-29-Divide-Two-Integers-题解" class="headerlink" title="LeetCode(29. Divide Two Integers)题解"></a>LeetCode(29. Divide Two Integers)题解</h1><hr>
<p>Given two integers dividend and divisor, divide two integers without using multiplication, division and mod operator.</p>
<p>Return the quotient after dividing dividend by divisor.</p>
<p>The integer division should truncate toward zero.</p>
<p>Example 1:</p>
<pre><code>Input: dividend = 10, divisor = 3
Output: 3</code></pre><p>Example 2:</p>
<pre><code>Input: dividend = 7, divisor = -3
Output: -2</code></pre><p>Note:</p>
<pre><code>Both dividend and divisor will be 32-bit signed integers.
The divisor will never be 0.
Assume we are dealing with an environment which could only store integers within the 32-bit signed integer range: [−231,  231 − 1]. For the purpose of this problem, assume that your function returns 231 − 1 when the division result overflows.</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>这是一个Medium的题，要求在不使用乘法、除法和求余数的情况下得到两个数相除的整数结果。（其实直接使用除法符号也可以AC，但这违背了题目的原则，还是不要用了）。</p>
<h3 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h3><p>最简单的方式就是在相同符号的情况下用被除数减除数，直到被除数的绝对值大小小于除数绝对值。减的次数就是除法结果，但是这样会超时，比如当被除数为2^31-1，除数为1的时候，就需要遍历2^31-1次，这是不可取的。</p>
<p>我们不能这么笨地一步步减，就像TCP传输报文的策略一样，只要没有遇到天花板，TCP单位时间内发送的报文是不断递增的，直到出现丢包。所以，我们可以将这种思想用在这道题上，每次不断用被除数减去除数的n倍，然后减法次数记录加上n，下一次被除数减去2n倍除数，减法记录次数加上2n，···，直到被除数不能减去除数为止。</p>
<p>但是这时候，不能直接返回函数，因为此时除数是初始除数的好多倍，所以不能保证被除数此时比初始除数小。比如我们假设被除数=7，除数=3，除数使用每次<em>2的方式增大。那么一开始7&gt;3，被除数变为4=7-3，除数变为6=3</em>2，结果记录1，然后被除数4&lt;6，但4&gt;3，此时不能直接返回。因此接下来除数应该变为3，然后再比较，将被除数变为1=4-3，结果记录为2，再返回。</p>
<p>所以，综上，我们应该使用被除数-除数，然后不断增大除数，每次减去之后，除数增大，当不能相减时，除数应该逐步回退到初始大小，然后直到被除数与初始大小的除数都不能相减后，函数才能结束。</p>
<p>这里有一个问题，除数以什么方式增大，最简单的方式是每次<em>2，然后回退的时候每次/2，但是题目要求不要用</em>和/号，那么我们就一丁点都不用。这里有个方式增大，设立两个变量：fore=1，back=0，然后每次增大的时候，fore=fore+back，back则变为上一次的fore，这样（fore，back）就每次为（1，0）（1，1）（2，1）（3，2）（5，3）（8，5）···。然后回退的时候，fore=back，back=fore-back。因为fore-back恰好是上一次迭代的back，所以可以不断回退。这就完全不需要使用*和/了。</p>
<p>PS：这个题的数使用int记录值，要特别注意越界的问题，int的取值范围是[-2^31, 2^31)。</p>
<p>代码如下，其实也可以不用每次都减，可以先不断增大除数直到不能减的前一个即最大的可以减的除数，然后减去之后再逐步减小，保证每次被除数减去除数的时候，除数总是被除数可以减去的最大倍数的除数，但是我这样写就可以达到最快的速度，所以就不改了（4ms）：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> dividend, <span class="keyword">int</span> divisor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dividend==-<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>) &amp;&amp; divisor==<span class="number">-1</span>) <span class="keyword">return</span> <span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>)<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span>(dividend==-<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>) &amp;&amp; divisor==<span class="number">1</span>) <span class="keyword">return</span> -<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">bool</span> s = ((dividend&lt;<span class="number">0</span> &amp;&amp; divisor&lt;<span class="number">0</span>)||(dividend&gt;<span class="number">0</span> &amp;&amp; divisor&gt;<span class="number">0</span>)) ? <span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(dividend!=-<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>))</span><br><span class="line">            dividend = dividend&gt;<span class="number">0</span> ? -dividend:dividend;</span><br><span class="line">        <span class="keyword">if</span>(divisor!=-<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>))        </span><br><span class="line">            divisor = divisor&gt;<span class="number">0</span> ? -divisor:divisor;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> temp;</span><br><span class="line">        <span class="keyword">int</span> fore = <span class="number">1</span>, back = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> fore_div = divisor, back_div = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(!(fore_div+back_div &lt; dividend &amp;&amp; back &lt;= <span class="number">0</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span>(fore_div+back_div &gt;= dividend)&#123;</span><br><span class="line">                res += fore + back;</span><br><span class="line">                dividend -= fore_div + back_div;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(-<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">31</span>)-fore_div &gt; fore_div+back_div) <span class="keyword">continue</span>;</span><br><span class="line">                temp = fore;</span><br><span class="line">                fore = fore + back;</span><br><span class="line">                back = temp;</span><br><span class="line">                </span><br><span class="line">                temp = fore_div;</span><br><span class="line">                fore_div = fore_div + back_div;</span><br><span class="line">                back_div = temp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                temp = fore;</span><br><span class="line">                fore = back;</span><br><span class="line">                back = temp - back;</span><br><span class="line">                </span><br><span class="line">                temp = fore_div;</span><br><span class="line">                fore_div = back_div;</span><br><span class="line">                back_div = temp - back_div;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(s) <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">return</span> -res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-04-30</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(30.%20Substring%20with%20Concatenation%20of%20All%20Words)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(30.%20Substring%20with%20Concatenation%20of%20All%20Words)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(30. Substring with Concatenation of All Words)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-30-Substring-with-Concatenation-of-All-Words-题解"><a href="#LeetCode-30-Substring-with-Concatenation-of-All-Words-题解" class="headerlink" title="LeetCode(30. Substring with Concatenation of All Words)题解"></a>LeetCode(30. Substring with Concatenation of All Words)题解</h1><hr>
<p>You are given a string, s, and a list of words, words, that are all of the same length. Find all starting indices of substring(s) in s that is a concatenation of each word in words exactly once and without any intervening characters.</p>
<p>Example 1:</p>
<pre><code>Input:
s = &quot;barfoothefoobarman&quot;,
words = [&quot;foo&quot;,&quot;bar&quot;]
Output: [0,9]</code></pre><p>Explanation: Substrings starting at index 0 and 9 are “barfoor” and “foobar” respectively.<br>The output order does not matter, returning [9,0] is fine too.<br>Example 2:</p>
<pre><code>Input:
s = &quot;wordgoodgoodgoodbestword&quot;,
words = [&quot;word&quot;,&quot;good&quot;,&quot;best&quot;,&quot;word&quot;]
Output: []</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>这是一个Hard题，要求给出一个字符串s和一个vector记录的相同长度的字符串。然后vector内的字符串随机组合之后的字符串是否是s的一个子串，如果是的话就记录下这个索引位置，最后返回一个vector。</p>
<p>这个题其实不难，可以只需要从头到尾遍历一下字符串，然后每次取一个固定长度的子串，看看这个子串是不是vector的字符串可以组合出来的，可以的话就记录下这个子串开始的位置。否则就看下一个，一个for循环就可以。</p>
<p>关键是如何判断一个字符串s是否可以由多个相同长度的字符串组合而成。这里我使用了map，将vector的各个字符串作为key，对应的个数作为value。只要依次从s中从前到后截取对应长度的子串看看在map中是否存在，最后判断是不是所有的子串都存在，且map中没有额外的存在了，就可以认为map中的字符串是可以组合而成的，否则就不能。</p>
<p>这样的代码可以AC，但花费了300MB内存，花费920ms。主要是map花费时间太多。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isStarting</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> wlen, <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp, <span class="keyword">int</span> vlen)</span></span>&#123;</span><br><span class="line">        <span class="built_in">string</span> sstr;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vlen; i++)&#123;</span><br><span class="line">            sstr = s.substr(i*wlen, wlen);</span><br><span class="line">            iter = mp.<span class="built_in">find</span>(sstr);</span><br><span class="line">            <span class="keyword">if</span>(iter == mp.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            mp[sstr]--;</span><br><span class="line">            <span class="keyword">if</span>(mp[sstr] &lt;= <span class="number">0</span>) mp.erase(sstr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">findSubstring</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</span><br><span class="line">        <span class="keyword">int</span> slen = s.<span class="built_in">size</span>(), vlen = words.<span class="built_in">size</span>(), wlen;</span><br><span class="line">        <span class="keyword">if</span>(slen==<span class="number">0</span> || vlen==<span class="number">0</span>) <span class="keyword">return</span> ret;</span><br><span class="line">        wlen = words[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(wlen==<span class="number">0</span>) <span class="keyword">return</span> ret;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vlen; i++)&#123;</span><br><span class="line">            iter = mp.<span class="built_in">find</span>(words[i]);</span><br><span class="line">            <span class="keyword">if</span>(iter != mp.<span class="built_in">end</span>()) mp[words[i]] += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> mp[words[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        slen -= wlen * vlen;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=slen; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isStarting(s.substr(i, wlen*vlen), wlen, mp, vlen)) ret.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>但这个也有很多可以优化的地方，比如不在map里使用erase函数。代码如下（还是很慢）：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isStarting</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> wlen, <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp, <span class="keyword">int</span> vlen)</span></span>&#123;</span><br><span class="line">        <span class="built_in">string</span> sstr;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vlen; i++)&#123;</span><br><span class="line">            sstr = s.substr(i*wlen, wlen);</span><br><span class="line">            iter = mp.<span class="built_in">find</span>(sstr);</span><br><span class="line">            <span class="keyword">if</span>(iter == mp.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            mp[sstr]--;</span><br><span class="line">            <span class="keyword">if</span>(mp[sstr] &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">findSubstring</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</span><br><span class="line">        <span class="keyword">int</span> slen = s.<span class="built_in">size</span>(), vlen = words.<span class="built_in">size</span>(), wlen;</span><br><span class="line">        <span class="keyword">if</span>(slen==<span class="number">0</span> || vlen==<span class="number">0</span>) <span class="keyword">return</span> ret;</span><br><span class="line">        wlen = words[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(wlen==<span class="number">0</span>) <span class="keyword">return</span> ret;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator iter;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vlen; i++)&#123;</span><br><span class="line">            iter = mp.<span class="built_in">find</span>(words[i]);</span><br><span class="line">            <span class="keyword">if</span>(iter != mp.<span class="built_in">end</span>()) mp[words[i]] += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> mp[words[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        slen -= wlen * vlen;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=slen; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isStarting(s.substr(i, wlen*vlen), wlen, mp, vlen)) ret.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave，2019-05-05。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(27.%20Remove%20Element)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(27.%20Remove%20Element)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(27. Remove Element)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-27-Remove-Element-题解"><a href="#LeetCode-27-Remove-Element-题解" class="headerlink" title="LeetCode(27. Remove Element)题解"></a>LeetCode(27. Remove Element)题解</h1><hr>
<p>原文如下<br>Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory.</p>
<p>The order of elements can be changed. It doesn’t matter what you leave beyond the new length.</p>
<p>Example 1:</p>
<pre><code>Given nums = [3,2,2,3], val = 3,

Your function should return length = 2, with the first two elements of nums being 2.</code></pre><p>It doesn’t matter what you leave beyond the returned length.<br>Example 2:</p>
<pre><code>Given nums = [0,1,2,2,3,0,4,2], val = 2,

Your function should return length = 5, with the first five elements of nums containing 0, 1, 3, 0, and 4.</code></pre><p>Note that the order of those five elements can be arbitrary.</p>
<p>It doesn’t matter what values are set beyond the returned length.<br>Clarification:</p>
<p>Confused why the returned value is an integer but your answer is an array?</p>
<p>Note that the input array is passed in by reference, which means modification to the input array will be known to the caller as well.</p>
<p>Internally you can think of this:</p>
<pre><code>// nums is passed in by reference. (i.e., without making a copy)
int len = removeElement(nums, val);

// any modification to nums in your function would be known by the caller.
// using the length returned by your function, it prints the first len elements.
for (int i = 0; i &lt; len; i++) {
    print(nums[i]);
}</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>这是一个easy题，直接使用vector的erase函数即可，在遍历的时候发现与val一样的数直接删除，注意的是函数不仅要返回正确的length，还要返回正确的vector。同时不要花费太多的space。</p>
<p>这是一种方式，（4ms），代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeElement</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=val) <span class="keyword">continue</span>;</span><br><span class="line">            nums.erase(nums.<span class="built_in">begin</span>()+i);</span><br><span class="line">            i--;</span><br><span class="line">            len--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h2><p>根据题意我们只要将vector前面正确length内的容器内放入正确的数就可以了，因此可以用一个位置来记录，当发现与一样的数的时候，将后面的数直接覆盖前面的就可以了。</p>
<p>代码如下(4ms)：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeElement</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;len; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[j]!=val) nums[i++] = nums[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(304.%20Range%20Sum%20Query%202D%20-%20Immutable)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(304.%20Range%20Sum%20Query%202D%20-%20Immutable)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(304. Range Sum Query 2D - Immutable)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-304-Range-Sum-Query-2D-Immutable-题解"><a href="#LeetCode-304-Range-Sum-Query-2D-Immutable-题解" class="headerlink" title="LeetCode(\304. Range Sum Query 2D - Immutable)题解"></a>LeetCode(\304. Range Sum Query 2D - Immutable)题解</h1><p>Given a 2D matrix <em>matrix</em>, find the sum of the elements inside the rectangle defined by its upper left corner (<em>row</em>1, <em>col</em>1) and lower right corner (<em>row</em>2, <em>col</em>2).</p>
<p><img src="https://leetcode.com/static/images/courses/range_sum_query_2d.png" alt="Range Sum Query 2D"><br>The above rectangle (with the red border) is defined by (row1, col1) = <strong>(2, 1)</strong> and (row2, col2) = <strong>(4, 3)</strong>, which contains sum = <strong>8</strong>.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Given matrix &#x3D; [</span><br><span class="line">  [3, 0, 1, 4, 2],</span><br><span class="line">  [5, 6, 3, 2, 1],</span><br><span class="line">  [1, 2, 0, 1, 5],</span><br><span class="line">  [4, 1, 0, 1, 7],</span><br><span class="line">  [1, 0, 3, 0, 5]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">sumRegion(2, 1, 4, 3) -&gt; 8</span><br><span class="line">sumRegion(1, 1, 2, 2) -&gt; 11</span><br><span class="line">sumRegion(1, 2, 2, 4) -&gt; 12</span><br></pre></td></tr></table></figure>



<p><strong>Note:</strong></p>
<ol>
<li>You may assume that the matrix does not change.</li>
<li>There are many calls to <em>sumRegion</em> function.</li>
<li>You may assume that <em>row</em>1 ≤ <em>row</em>2 and <em>col</em>1 ≤ <em>col</em>2.</li>
</ol>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>给出一个二维数组，构建一个类，建立一个函数，给出左上角和右下角坐标，要求每次返回数组的对应区域的元素之和。</p>
<p>这个题因为说明了构建数组是一次操作，后续多次是查询区域和操作，所以我们可以首先构建数组的和。使用D来表示和，D[i][j]表示从(0,0)到(i,j)的所有元素之和。那么后续每次查询都可以在O(1)的时间内完成。直接返回D[i][j]-D[i][b]-D[a][j]+D[a][b]，其中ij是右下角，ab左上角。</p>
<p>代码如下，时间复杂度分为两部分，构建花费O(n2)，后续每次查询花费O(1)，空间复杂度O(n2)。</p>
<p><code>Runtime: 24 ms, faster than 80.82% of C++ online submissions for Range Sum Query 2D - Immutable.</code></p>
<p><code>Memory Usage: 16.5 MB, less than 100.00% of C++ online submissions for Range Sum Query 2D - Immutable.</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumMatrix</span> &#123;</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; D;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NumMatrix(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix) &#123;</span><br><span class="line">        <span class="keyword">int</span> row = matrix.<span class="built_in">size</span>(), col;</span><br><span class="line">        <span class="comment">//D = vector&lt;vector&lt;int&gt;&gt;(0, vector&lt;int&gt;(0));</span></span><br><span class="line">        <span class="keyword">if</span>(row == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        col = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        D.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(col+<span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;row; i++)&#123;</span><br><span class="line">            D.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(col+<span class="number">1</span>));</span><br><span class="line">            D[i+<span class="number">1</span>][<span class="number">0</span>] = D[i][<span class="number">0</span>] + matrix[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;col; j++) D[i+<span class="number">1</span>][j+<span class="number">1</span>] = matrix[i][j] + D[i+<span class="number">1</span>][j] + D[i][j+<span class="number">1</span>] - D[i][j]; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumRegion</span><span class="params">(<span class="keyword">int</span> row1, <span class="keyword">int</span> col1, <span class="keyword">int</span> row2, <span class="keyword">int</span> col2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(D.<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> D[row2+<span class="number">1</span>][col2+<span class="number">1</span>] - D[row2+<span class="number">1</span>][col1] - D[row1][col2+<span class="number">1</span>] + D[row1][col1];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your NumMatrix object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * NumMatrix* obj = new NumMatrix(matrix);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;sumRegion(row1,col1,row2,col2);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>BitBrave，2019-12-06</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(309.%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(309.%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(309. Best Time to Buy and Sell Stock with Cooldown)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown-题解"><a href="#LeetCode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown-题解" class="headerlink" title="LeetCode(309. Best Time to Buy and Sell Stock with Cooldown)题解"></a>LeetCode(309. Best Time to Buy and Sell Stock with Cooldown)题解</h1><hr>
<p>Say you have an array for which the ith element is the price of a given stock on day i.</p>
<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times) with the following restrictions:</p>
<p>You may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).<br>After you sell your stock, you cannot buy stock on next day. (ie, cooldown 1 day)<br>Example:</p>
<pre><code>Input: [1,2,3,0,2]
Output: 3 
Explanation: transactions = [buy, sell, cooldown, buy, sell]</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>给一个数组P，每个元素表示当天的股票交易价格。现在每天可以买入和卖出一只股票，但卖出必须在买入之后，同一时间内最多只能持有一只股票。且卖出之后必须至少隔一天才能买入。求出能得到的最大的收益。</p>
<p>这个题很明显的可以使用DP进行解决。有时候DP有一个状态转移方程，很难想出来。这个可以用状态图。参考<a href="https://www.cnblogs.com/jdneo/p/5228004.html" target="_blank" rel="noopener">https://www.cnblogs.com/jdneo/p/5228004.html</a></p>
<p>这里我用了一个稍微改变的。使用与数组等长的数组A，B。A[i]表示在第i天持有股票的情况下得到的最大收益，B[i]表示在第i天不持有股票的情况下得到的最大收益。最终的结果就是B[P.size-1]。</p>
<p>那么如何来填充这个数组呢？首先是A[i],持有股票可以由两种情况产生，今天买了股票，或者前几天买了但还没卖。这样因为买股票必须隔一天，即max(B[i-2]-P[i], A[i-1]). 然后是B[i]，不持有股票同样是两种情况，今天卖了股票，或者前几天就卖了的。即max(A[i-1]+P[i], B[i-1]).</p>
<p>注意要初始化，A[0]=-P[0], B[0]=0. A[1]=max(-P[0], -P[1]), B[1]=max(0, P[1]-P[0]). 随后就使用状态转移即可。<br>最终得到结果。时间复杂度和空间复杂度均为O(n)</p>
<p>代码如下：</p>
<p>Runtime: 4 ms, faster than 76.60% of C++ online submissions for Best Time to Buy and Sell Stock with Cooldown.<br>Memory Usage: 8.6 MB, less than 98.95% of C++ online submissions for Best Time to Buy and Sell Stock with Cooldown.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(len&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        vector&lt;int&gt; A(len, 0), B(len, 0);</span><br><span class="line">        A[<span class="number">0</span>] = -prices[<span class="number">0</span>]; B[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        A[<span class="number">1</span>] = <span class="built_in">max</span>(-prices[<span class="number">0</span>], -prices[<span class="number">1</span>]); B[<span class="number">1</span>]=<span class="built_in">max</span>(<span class="number">0</span>, prices[<span class="number">1</span>]-prices[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;len; i++)&#123;</span><br><span class="line">            A[i] = <span class="built_in">max</span>(B[i<span class="number">-2</span>]-prices[i], A[i<span class="number">-1</span>]);</span><br><span class="line">            B[i] = <span class="built_in">max</span>(B[i<span class="number">-1</span>], A[i<span class="number">-1</span>]+prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> B[len<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-08-05</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(32.%20Longest%20Valid%20Parentheses)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(32.%20Longest%20Valid%20Parentheses)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(32. Longest Valid Parentheses)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-32-Longest-Valid-Parentheses-题解"><a href="#LeetCode-32-Longest-Valid-Parentheses-题解" class="headerlink" title="LeetCode(32. Longest Valid Parentheses)题解"></a>LeetCode(32. Longest Valid Parentheses)题解</h1><hr>
<p>Given a string containing just the characters ‘(‘ and ‘)’, find the length of the longest valid (well-formed) parentheses substring.</p>
<p>Example 1:</p>
<pre><code>Input: &quot;(()&quot;
Output: 2
Explanation: The longest valid parentheses substring is &quot;()&quot;</code></pre><p>Example 2:</p>
<pre><code>Input: &quot;)()())&quot;
Output: 4
Explanation: The longest valid parentheses substring is &quot;()()&quot;</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>Hard题，题目要求给定一串由”(“和”)”组成的字符串，然后判断这个字符串内最大的合法字符串的长度是多少。</p>
<h3 id="解法1（完全自我推断-时间复杂度O-n2-空间复杂度O-1-）"><a href="#解法1（完全自我推断-时间复杂度O-n2-空间复杂度O-1-）" class="headerlink" title="解法1（完全自我推断,时间复杂度O(n2), 空间复杂度O(1)）"></a>解法1（完全自我推断,时间复杂度O(n2), 空间复杂度O(1)）</h3><p>一个思路是，从每一个位置开始，然后逐步遍历到最后看当前字符串是否是合法的。（当从左到右数，任意位置下，当前的”(“的数量是大于等于”)”的数量，并且当”(“的数量等于”)”时，表示这个字符串是相等的。时间复杂度O(n2)</p>
<p>代码如下，非常慢（624ms，faster than 5.73% examples，但内存9.2 MB, less than 99.43%）:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, len = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            left = <span class="number">0</span>;</span><br><span class="line">            right = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;len; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[j]==<span class="string">'('</span>) left++;</span><br><span class="line">                <span class="keyword">else</span> right++;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(left==right) ret = <span class="built_in">max</span>(ret, left+right);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(left&lt;right) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>下面的方法均参考别人的解法，理解之后完成代码。</p>
<h3 id="解法2-时间复杂度O-n-空间复杂度O-n"><a href="#解法2-时间复杂度O-n-空间复杂度O-n" class="headerlink" title="解法2(时间复杂度O(n),空间复杂度O(n))"></a>解法2(时间复杂度O(n),空间复杂度O(n))</h3><p>使用栈结构<br>使用一个栈来存储位置，初始化一个值sta=0，用来记录合法字符串的起点，一个值ret记录目前的最长的有效字符串。从左到右遍历s，遇到左括号就压入位置。遇到右括号时，有以下几种情况。</p>
<p>1 当前栈内为空，表示右括号没有匹配，则丢弃即可。将sta设为当前右括号的下一个位置。<br>2 当前不为空，且弹出当前字符，此时且栈内为空，表示目前遍历的字符串是匹配的，更新ret = max(ret, i-sta+1)<br>3 当前不为空，且弹出当前字符，此时且栈内也不为空，表示目前遍历的字符串中栈顶元素所在位置往后数到i都是匹配的，更新ret = max(ret, i-栈顶元素所在位置)</p>
<p>代码如下：<br>Runtime: 4 ms, faster than 99.94% of C++ online submissions for Longest Valid Parentheses.<br>Memory Usage: 9.7 MB, less than 98.85% of C++ online submissions for Longest Valid Parentheses.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, sta = <span class="number">0</span>, len = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; st;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i]==<span class="string">'('</span>) st.push(i);</span><br><span class="line">            <span class="keyword">else</span>&#123; <span class="comment">// ')'</span></span><br><span class="line">                <span class="keyword">if</span>(st.empty()) sta = i+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    st.pop();</span><br><span class="line">                    ret = <span class="built_in">max</span>(ret, st.empty() ? i-sta+<span class="number">1</span>:i-st.top());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="解法3-时间复杂度O-n-空间复杂度O-n"><a href="#解法3-时间复杂度O-n-空间复杂度O-n" class="headerlink" title="解法3(时间复杂度O(n),空间复杂度O(n))"></a>解法3(时间复杂度O(n),空间复杂度O(n))</h3><p>使用DP, 建立一个数组与s的长度一致。dp[i]表示从s[0]开始以s[i]作为有效合法字符串的结尾字符时的有效合法字符串最长长度。</p>
<p>首先初始化所有dp元素为0，然后从头到尾遍历s，当遍历到s[i]时，有如下几种情况。</p>
<p>1 s[i]为左括号，直接设置dp[i]==0，因为以左括号结尾的字符串不会是合法字符串。<br>2 s[i]为右括号，有如下几种情况<br>2.1 s[i-1]为左括号，表示二者匹配，那么可以直接就在dp[i-2]的基础上+2即可<br>2.2 s[i-1]为右括号，这表示其可能与前面的某个左括号已经匹配了（形成了”(<strong>**</strong>)”），那么我们就需要刨除掉这个匹配序列（包括中间的），直接查看s[i-1-dp[i-1]]，又有如下两种情况。<br>2.2.1 s[i-1-dp[i-1]]为左括号，表示其与s[i]匹配，那么可以直接就在dp[i-1]的基础上+2，但这时候还要注意s[i-1-dp[i-1]]前面可能还有匹配的，因此要再加上dp[i-1-dp[i-1]-1]。<br>2.2.2 s[i-1]为右括号，表示二者不匹配，dp[i]等于0即可 </p>
<p>其实还有一种反向的，使用DP, 建立一个数组与s的长度一致。dp[i]表示以s[i]开始的到结尾字符时的有效合法字符串的最长长度。但原理是一模一样的，只是换个方向而已。</p>
<p>代码如下：<br>Runtime: 8 ms, faster than 98.56% of C++ online submissions for Longest Valid Parentheses.<br>Memory Usage: 9.6 MB, less than 98.85% of C++ online submissions for Longest Valid Parentheses.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, len = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(len&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(len, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i]==<span class="string">'('</span>) dp[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span>&#123; <span class="comment">// ')'</span></span><br><span class="line">                <span class="keyword">if</span>(i&lt;<span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[i<span class="number">-1</span>]==<span class="string">'('</span>) dp[i] = <span class="number">2</span> + (i&lt;<span class="number">2</span> ? <span class="number">0</span> : dp[i<span class="number">-2</span>]);</span><br><span class="line">                <span class="keyword">else</span> dp[i] = i<span class="number">-1</span>-dp[i<span class="number">-1</span>]&gt;=<span class="number">0</span> &amp;&amp;  s[i<span class="number">-1</span>-dp[i<span class="number">-1</span>]]==<span class="string">'('</span>? (dp[i<span class="number">-1</span>] + <span class="number">2</span> + (i<span class="number">-2</span>-dp[i<span class="number">-1</span>]&gt;=<span class="number">0</span> ? dp[i<span class="number">-2</span>-dp[i<span class="number">-1</span>]] : <span class="number">0</span>)) : <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ret = <span class="built_in">max</span>(ret, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="解法4-时间复杂度O-n-空间复杂度O-1-个人觉得是最棒的思路"><a href="#解法4-时间复杂度O-n-空间复杂度O-1-个人觉得是最棒的思路" class="headerlink" title="解法4(时间复杂度O(n),空间复杂度O(1)) 个人觉得是最棒的思路"></a>解法4(时间复杂度O(n),空间复杂度O(1)) 个人觉得是最棒的思路</h3><p>从头到尾遍历s，再从尾到头遍历s，二次遍历即可。</p>
<p>首先从左到右，使用left记录遇到的左括号数，right记录遇到的右括号数。当left==right时，更新ret=max(ret, left+right)，当左括号比右括号多时就不管，但是右括号比左括号多的时候就表示这个已经不匹配了，就从当前位置的下一个重新开始计数。</p>
<p>然后从右到左，使用left记录遇到的左括号数，right记录遇到的右括号数。当left==right时，更新ret=max(ret, left+right)，当右括号比比括号多时就不管，但是左括号比右括号多的时候就表示这个已经不匹配了，就从当前位置的下一个重新开始计数。</p>
<p>解释，前后两遍遍历其实是将多余的左括号和右括号的情况都涵盖了进来，当序列中左括号多时，从后往前可以得到最多的。当右括号多时，从左往右可以计算出来。</p>
<p>代码如下：<br>Runtime: 8 ms, faster than 98.56% of C++ online submissions for Longest Valid Parentheses.<br>Memory Usage: 9.2 MB, less than 99.43% of C++ online submissions for Longest Valid Parentheses.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, len = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            s[i] == <span class="string">'('</span> ? left++ : right++;</span><br><span class="line">            <span class="keyword">if</span>(left==right) ret = <span class="built_in">max</span>(ret, left*<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(left&lt;right) &#123;</span><br><span class="line">                left = <span class="number">0</span>;</span><br><span class="line">                right = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        left = <span class="number">0</span>; right = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=len<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            s[i] == <span class="string">'('</span> ? left++ : right++;</span><br><span class="line">            <span class="keyword">if</span>(left==right) ret = <span class="built_in">max</span>(ret, left*<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(left&gt;right)&#123;</span><br><span class="line">                left = <span class="number">0</span>;</span><br><span class="line">                right = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-05-08</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(31.%20Next%20Permutation)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(31.%20Next%20Permutation)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(31. Next Permutation)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-31-Next-Permutation-题解"><a href="#LeetCode-31-Next-Permutation-题解" class="headerlink" title="LeetCode(31. Next Permutation)题解"></a>LeetCode(31. Next Permutation)题解</h1><hr>
<p>Implement next permutation, which rearranges numbers into the lexicographically next greater permutation of numbers.</p>
<p>If such arrangement is not possible, it must rearrange it as the lowest possible order (ie, sorted in ascending order).</p>
<p>The replacement must be in-place and use only constant extra memory.</p>
<p>Here are some examples. Inputs are in the left-hand column and its corresponding outputs are in the right-hand column.</p>
<pre><code>1,2,3 → 1,3,2
3,2,1 → 1,2,3
1,1,5 → 1,5,1</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>题目是Medium难度。将vector存的数组合而成变为一个新的更大的数，并且是可以组合最大的数内的最小的。比如123只能变成132。</p>
<p>思路就是，从后往前走，遇到一个比已遍历数中最大的数要小的数（直接看从后往前走是不是升序，遇到第一个不符合情况的即可），就将这个数与已遍历数中比其大的中最小的进行交换，然后将已遍历数进行升序排序即可。如果直到走到头都没有，则这个vector是降序排列的，那么只要将其倒序即可。</p>
<p>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">nextPermutation</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(len&lt;=<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> m;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=len<span class="number">-1</span>; i&gt;<span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&lt;=nums[i<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=len<span class="number">-1</span>; j&gt;i<span class="number">-1</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[j]&lt;=nums[i<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                swap(nums[j], nums[i<span class="number">-1</span>]);</span><br><span class="line">                sort(nums.<span class="built_in">begin</span>()+i, nums.<span class="built_in">end</span>());</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> left=<span class="number">0</span>, right=len<span class="number">-1</span>; left&lt;right; left++, right--)&#123;</span><br><span class="line">            swap(nums[left], nums[right]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(322.%20Coin%20Change)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(322.%20Coin%20Change)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(322. Coin Change)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-322-Coin-Change-题解"><a href="#LeetCode-322-Coin-Change-题解" class="headerlink" title="LeetCode(322. Coin Change)题解"></a>LeetCode(322. Coin Change)题解</h1><hr>
<p>You are given coins of different denominations and a total amount of money amount. Write a function to compute the fewest number of coins that you need to make up that amount. If that amount of money cannot be made up by any combination of the coins, return -1.</p>
<p>Example 1:</p>
<pre><code>Input: coins = [1, 2, 5], amount = 11
Output: 3 
Explanation: 11 = 5 + 5 + 1</code></pre><p>Example 2:</p>
<pre><code>Input: coins = [2], amount = 3
Output: -1
Note:
You may assume that you have an infinite number of each kind of coin.</code></pre><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>给一串数表示每个硬币的面值，每个硬币假设有无限个，从中找出可以组成给定面值的最小的硬币个数，返回其数目，否则返回-1.</p>
<p>这个题明显用DP求解。但是状态转移方程有点难想，还是那句话，先从最简单的着手。假设硬币的面额有n种，第i种的面额为n[i]。需要凑齐的面额为m。</p>
<p>我们用一个数组D[n][m]来进行状态方程的转移记录，初始化都为inf。其中D[i][j]表示在n[1-i]中凑齐面额为j的需要的最小的硬币数。如果凑不齐，就令D[i][j]=inf。那么最终结果就是D[n][m]。</p>
<p>如何书写状态转移方程呢？假设要填充D[i][j], 那么有如下几种情况：</p>
<p>不选择n[i]硬币，D[i][j] = D[i-1][j].</p>
<p>选择了一枚或者多枚n[i]硬币，D[i][j] = D[i][j-n[i]].</p>
<p>那么D[i][j] = min(D[i-1][j], D[i][j-n[i]]).</p>
<p>优化策略</p>
<p>这里可以看到，每次更新D[i][j]的时候，其实只用到了i-1行的数据，因此，可以将D[n][m]变为一个D[2][m]的数组。</p>
<p>更进一步，D[i][j]更新使用的D[i-1][j]只表示上一个状态，因此，可以将D[2][m]直接变为D[m]初始化D[0]=0, 表示0面额需要0个硬币。</p>
<p>最终时间复杂度O(mn)，空间复杂度O(m)</p>
<p>代码如下:</p>
<p>Runtime: 48 ms, faster than 65.50% of C++ online submissions for Coin Change.<br>Memory Usage: 12.6 MB, less than 82.35% of C++ online submissions for Coin Change.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = coins.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">0</span>) <span class="keyword">return</span> amount == <span class="number">0</span> ? <span class="number">0</span>:<span class="number">-1</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">res</span><span class="params">(amount+<span class="number">1</span>, INT_MAX)</span></span>;</span><br><span class="line">        res[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=amount; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j-coins[i]&gt;=<span class="number">0</span>) res[j] = <span class="built_in">min</span>(res[j], <span class="number">1</span> + (res[j-coins[i]]==INT_MAX ? INT_MAX<span class="number">-1</span> : res[j-coins[i]]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[amount] == INT_MAX ? <span class="number">-1</span> : res[amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-08-19</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(33.%20Search%20in%20Rotated%20Sorted%20Array)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/LeetCode(33.%20Search%20in%20Rotated%20Sorted%20Array)%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">LeetCode(33. Search in Rotated Sorted Array)题解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LeetCode-33-Search-in-Rotated-Sorted-Array-题解"><a href="#LeetCode-33-Search-in-Rotated-Sorted-Array-题解" class="headerlink" title="LeetCode(33. Search in Rotated Sorted Array)题解"></a>LeetCode(33. Search in Rotated Sorted Array)题解</h1><hr>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>给定一个升序的一串数字，其中有可能在某个位置被旋转了，比如 1、2、3、4、5在3旋转就变成了3、4、5、1、2，此时的旋转点位置的值5，因为这个值之后的数都变小了。现在假定这串数字是不重合的，给定一个数target，要求在O(logn)的时间内找出这个数在一串数字中的索引，如果有的话就返回位置，没有返回-1。</p>
<p>一旦涉及到logn通常考虑二分查找。因此这个题可以这样想，首先将数组对半分，查看中间的数与两边的数的大小，可以知道的是，当数组被旋转之后，第一个元素是一定大于最后一个元素的。</p>
<p>假如中间元素小于右边元素，可以判断旋转点在中间元素的左边。此时有以下几种情况：</p>
<p>1 target=中间元素，直接返回索引值，算法结束<br>2 target=右边元素，直接返回索引值，算法结束<br>3 target大于右边元素，表明其值只可能在左边的半个数组内，在左边数组内寻找<br>4 target小于中间元素，表明其值只可能在左边的半个数组内，在左边数组内寻找<br>5 target在中间元素和右边元素之间，表明其值只可能在右边的半个数组内，在右边数组内寻找</p>
<p>假如中间元素大于右边元素，可以判断旋转点在中间元素的右边。此时有以下几种情况：</p>
<p>1 target=中间元素，直接返回索引值，算法结束<br>2 target=左边元素，直接返回索引值，算法结束<br>3 target小于左边元素，表明其值只可能在右边的半个数组内，在右边数组内寻找<br>4 target大于中间元素，表明其值只可能在右边的半个数组内，在右边数组内寻找<br>5 target在中间元素和左边元素之间，表明其值只可能在左边的半个数组内，在左边数组内寻找</p>
<p>注意，如果没有target如何判断，可以这样：当中间元素等于右边元素时，表明此时数组内就一个元素，而此时target还是不等于的话，就返回-1。<br>这样，每次都将数组减半，时间复杂度为O(logn)</p>
<p>代码如下：<br>Runtime: 4 ms, faster than 99.87% of C++ online submissions for Search in Rotated Sorted Array.<br>Memory Usage: 9.1 MB, less than 98.58% of C++ online submissions for Search in Rotated Sorted Array.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findindex</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left&gt;right) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> med = (left+right)/<span class="number">2</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(nums[med]==nums[right]) <span class="keyword">return</span> nums[med]==target ? med:<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(nums[med]&lt;nums[right])&#123;</span><br><span class="line">            <span class="keyword">if</span>(target==nums[med]) <span class="keyword">return</span> med;</span><br><span class="line">            <span class="keyword">if</span>(target==nums[right]) <span class="keyword">return</span> right;</span><br><span class="line">            <span class="keyword">if</span>(target&lt;nums[med]) <span class="keyword">return</span> findindex(nums, left, med<span class="number">-1</span>, target);</span><br><span class="line">            <span class="keyword">if</span>(target&gt;nums[right]) <span class="keyword">return</span> findindex(nums, left, med<span class="number">-1</span>, target);</span><br><span class="line">            <span class="keyword">return</span> findindex(nums, med+<span class="number">1</span>, right, target);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//nums[med]&gt;nums[right])&#123;</span></span><br><span class="line">        <span class="keyword">if</span>(target==nums[med]) <span class="keyword">return</span> med;</span><br><span class="line">        <span class="keyword">if</span>(target==nums[left]) <span class="keyword">return</span> left;</span><br><span class="line">        <span class="keyword">if</span>(target&gt;nums[med]) <span class="keyword">return</span> findindex(nums, med+<span class="number">1</span>, right, target);</span><br><span class="line">        <span class="keyword">if</span>(target&lt;nums[left]) <span class="keyword">return</span> findindex(nums, med+<span class="number">1</span>, right, target);</span><br><span class="line">        <span class="keyword">return</span> findindex(nums, left, med<span class="number">-1</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(len==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> findindex(nums, <span class="number">0</span>, len<span class="number">-1</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findindex</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left&gt;right) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span>(left==right) <span class="keyword">return</span> nums[left]==target ? left:<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> med = (left+right)/<span class="number">2</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//if(nums[med]==nums[right]) return nums[med]==target ? med:-1;</span></span><br><span class="line">        <span class="keyword">if</span>(nums[med]&lt;nums[right])&#123;</span><br><span class="line">            <span class="keyword">if</span>(target==nums[med]) <span class="keyword">return</span> med;</span><br><span class="line">            <span class="keyword">if</span>(target==nums[right]) <span class="keyword">return</span> right;</span><br><span class="line">            <span class="keyword">if</span>(target&lt;nums[med]) <span class="keyword">return</span> findindex(nums, left, med<span class="number">-1</span>, target);</span><br><span class="line">            <span class="keyword">if</span>(target&gt;nums[right]) <span class="keyword">return</span> findindex(nums, left, med<span class="number">-1</span>, target);</span><br><span class="line">            <span class="keyword">return</span> findindex(nums, med+<span class="number">1</span>, right, target);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//nums[med]&gt;nums[right])&#123;</span></span><br><span class="line">        <span class="keyword">if</span>(target==nums[med]) <span class="keyword">return</span> med;</span><br><span class="line">        <span class="keyword">if</span>(target==nums[left]) <span class="keyword">return</span> left;</span><br><span class="line">        <span class="keyword">if</span>(target&gt;nums[med]) <span class="keyword">return</span> findindex(nums, med+<span class="number">1</span>, right, target);</span><br><span class="line">        <span class="keyword">if</span>(target&lt;nums[left]) <span class="keyword">return</span> findindex(nums, med+<span class="number">1</span>, right, target);</span><br><span class="line">        <span class="keyword">return</span> findindex(nums, left, med<span class="number">-1</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(len==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> findindex(nums, <span class="number">0</span>, len<span class="number">-1</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-05-10</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="XJ"
      src="http://img.duoziwang.com/2017/05/20/B28913465.jpg">
  <p class="site-author-name" itemprop="name">XJ</p>
  <div class="site-description" itemprop="description">幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">333</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BitBrave, IIE</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
