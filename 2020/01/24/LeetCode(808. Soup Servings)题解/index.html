<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="LeetCode(808. Soup Servings)题解 There are two types of soup: type A and type B. Initially we have N ml of each type of soup. There are four kinds of operations: Serve 100 ml of soup A and 0 ml of soup">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode(808. Soup Servings)题解">
<meta property="og:url" content="http://yoursite.com/2020/01/24/LeetCode(808.%20Soup%20Servings)%E9%A2%98%E8%A7%A3/index.html">
<meta property="og:site_name" content="BitBrave">
<meta property="og:description" content="LeetCode(808. Soup Servings)题解 There are two types of soup: type A and type B. Initially we have N ml of each type of soup. There are four kinds of operations: Serve 100 ml of soup A and 0 ml of soup">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-01-24T10:05:21.000Z">
<meta property="article:modified_time" content="2020-01-24T10:05:21.000Z">
<meta property="article:author" content="XJ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/01/24/LeetCode(808.%20Soup%20Servings)%E9%A2%98%E8%A7%A3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>LeetCode(808. Soup Servings)题解 | BitBrave</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">BitBrave</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">IIE</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/24/LeetCode(808.%20Soup%20Servings)%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="XJ">
      <meta itemprop="description" content="幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BitBrave">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LeetCode(808. Soup Servings)题解
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-24 18:05:21" itemprop="dateCreated datePublished" datetime="2020-01-24T18:05:21+08:00">2020-01-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="LeetCode-808-Soup-Servings-题解"><a href="#LeetCode-808-Soup-Servings-题解" class="headerlink" title="LeetCode(808. Soup Servings)题解"></a>LeetCode(808. Soup Servings)题解</h1><hr>
<p>There are two types of soup: type A and type B. Initially we have N ml of each type of soup. There are four kinds of operations:</p>
<pre><code>Serve 100 ml of soup A and 0 ml of soup B
Serve 75 ml of soup A and 25 ml of soup B
Serve 50 ml of soup A and 50 ml of soup B
Serve 25 ml of soup A and 75 ml of soup B</code></pre><p>When we serve some soup, we give it to someone and we no longer have it.  Each turn, we will choose from the four operations with equal probability 0.25. If the remaining volume of soup is not enough to complete the operation, we will serve as much as we can.  We stop once we no longer have some quantity of both types of soup.</p>
<p>Note that we do not have the operation where all 100 ml’s of soup B are used first.  </p>
<p>Return the probability that soup A will be empty first, plus half the probability that A and B become empty at the same time.</p>
<pre><code>Example:
Input: N = 50
Output: 0.625
Explanation: </code></pre><p>If we choose the first two operations, A will become empty first. For the third operation, A and B will become empty at the same time. For the fourth operation, B will become empty first. So the total probability of A becoming empty first plus half the probability that A and B become empty at the same time, is 0.25 * (1 + 1 + 0.5 + 0) = 0.625.</p>
<p>Notes:</p>
<pre><code>0 &lt;= N &lt;= 10^9. 
Answers within 10^-6 of the true value will be accepted as correct.</code></pre><h2 id="阶梯思路"><a href="#阶梯思路" class="headerlink" title="阶梯思路"></a>阶梯思路</h2><p>有A，B两种汤。初始每种汤各有N毫升，现有4种操作：</p>
<ol>
<li>A倒出100ml，B倒出0ml</li>
<li>A倒出75ml， B倒出25ml</li>
<li>A倒出50ml， B倒出50ml</li>
<li>A倒出25ml， B倒出75ml</li>
</ol>
<p>每种操作的概率均等为0.25。如果汤的剩余容量不足完成某次操作，则有多少倒多少。当每一种汤都倒完时停止操作。</p>
<p>求A先倒完的概率，加上A和B同时倒完的概率。</p>
<p>这个可以用DP，DP[i][j]分别表示A中的为i和B中为j时满足题目的概率。这题关键其实是返回1的trick，因为Notes里说了可以容忍一定的数据错误，那么当N足够大的时候，概率足够接近1，就直接返回1就可了。</p>
<p>代码如下,时间复杂度O(n2)，空间复杂度O(n2).(其实都是O(1)):</p>
<p>Runtime: 4 ms, faster than 81.50% of C++ online submissions for Soup Servings.<br>Memory Usage: 9 MB, less than 100.00% of C++ online submissions for Soup Servings.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">soupServings</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">5000</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        N = <span class="built_in">ceil</span>(N/<span class="number">25.0</span>);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;&gt; V;</span><br><span class="line">        <span class="keyword">if</span>(N == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0.5</span>;</span><br><span class="line">        V = <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;&gt;(N+<span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;(N+<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">        V[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0.5</span>;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;<span class="number">0</span>) V[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">5</span>/<span class="number">8.0</span>;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;<span class="number">1</span>) V[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">6</span>/<span class="number">8.0</span>;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;<span class="number">2</span>) V[<span class="number">0</span>][<span class="number">3</span>] = <span class="number">7</span>/<span class="number">8.0</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;V[<span class="number">0</span>][<span class="number">1</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=N; a++)&#123;</span><br><span class="line">            V[a][<span class="number">0</span>] = <span class="number">0.0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> b=<span class="number">1</span>; b&lt;=N; b++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(a==<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(b==<span class="number">1</span>) V[a][b] = <span class="number">5</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">2</span>) V[a][b] = <span class="number">6</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">3</span>) V[a][b] = <span class="number">7</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span>  V[a][b] = <span class="number">1.0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">2</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(b==<span class="number">1</span>) V[a][b] = <span class="number">4</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">2</span>) V[a][b] = <span class="number">5</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">3</span>) V[a][b] = <span class="number">6</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span>  V[a][b] = <span class="number">6</span>/<span class="number">8.0</span> + <span class="number">0.25</span> * V[a<span class="number">-1</span>][b<span class="number">-3</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">3</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(b==<span class="number">1</span>) V[a][b] = <span class="number">3</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">2</span>) V[a][b] = <span class="number">4</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">3</span>) V[a][b] = <span class="number">4</span>/<span class="number">8.0</span> +  <span class="number">0.25</span> * V[a<span class="number">-2</span>][b<span class="number">-2</span>];</span><br><span class="line">                    <span class="keyword">else</span>  V[a][b] = <span class="number">4</span>/<span class="number">8.0</span> + <span class="number">0.25</span> * (V[a<span class="number">-2</span>][b<span class="number">-2</span>] + V[a<span class="number">-1</span>][b<span class="number">-3</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">4</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(b==<span class="number">1</span>) V[a][b] = <span class="number">2</span>/<span class="number">8.0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">2</span>) V[a][b] = <span class="number">2</span>/<span class="number">8.0</span> + <span class="number">0.25</span> * V[a<span class="number">-3</span>][b<span class="number">-1</span>];</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">3</span>) V[a][b] = <span class="number">2</span>/<span class="number">8.0</span> +  <span class="number">0.25</span> * (V[a<span class="number">-3</span>][b<span class="number">-1</span>] + V[a<span class="number">-2</span>][b<span class="number">-2</span>]);</span><br><span class="line">                    <span class="keyword">else</span>  V[a][b] = <span class="number">2</span>/<span class="number">8.0</span> + <span class="number">0.25</span> * (V[a<span class="number">-3</span>][b<span class="number">-1</span>] + V[a<span class="number">-2</span>][b<span class="number">-2</span>] + V[a<span class="number">-1</span>][b<span class="number">-3</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(b==<span class="number">1</span>) V[a][b] = <span class="number">0.25</span> * V[a<span class="number">-4</span>][b];</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">2</span>) V[a][b] = <span class="number">0.25</span> * (V[a<span class="number">-4</span>][b]+ V[a<span class="number">-3</span>][b<span class="number">-1</span>]);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">3</span>) V[a][b] = <span class="number">0.25</span> * (V[a<span class="number">-4</span>][b]+ V[a<span class="number">-3</span>][b<span class="number">-1</span>] + V[a<span class="number">-2</span>][b<span class="number">-2</span>]);</span><br><span class="line">                    <span class="keyword">else</span>  V[a][b] = <span class="number">0.25</span> * (V[a<span class="number">-4</span>][b] + V[a<span class="number">-3</span>][b<span class="number">-1</span>] + V[a<span class="number">-2</span>][b<span class="number">-2</span>] + V[a<span class="number">-1</span>][b<span class="number">-3</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> V[N][N];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BitBrave, 2019-08-31</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/24/LeetCode(809.%20Expressive%20Words)%E9%A2%98%E8%A7%A3/" rel="prev" title="LeetCode(809. Expressive Words)题解">
      <i class="fa fa-chevron-left"></i> LeetCode(809. Expressive Words)题解
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/01/24/LeetCode(807.%20Max%20Increase%20to%20Keep%20City%20Skyline)%E9%A2%98%E8%A7%A3/" rel="next" title="LeetCode(807. Max Increase to Keep City Skyline)题解">
      LeetCode(807. Max Increase to Keep City Skyline)题解 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#LeetCode-808-Soup-Servings-题解"><span class="nav-number">1.</span> <span class="nav-text">LeetCode(808. Soup Servings)题解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#阶梯思路"><span class="nav-number">1.1.</span> <span class="nav-text">阶梯思路</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">XJ</p>
  <div class="site-description" itemprop="description">幸福总是相通的，不幸则各有各的不幸。寂寞好像是世人的共性，众生都是我，也都不是我。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">367</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XJ</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
